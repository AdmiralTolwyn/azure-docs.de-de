<properties
   pageTitle="Anleitungen zum automatischen Skalieren | Microsoft Azure"
   description="Anweisungen zum automatischen Skalieren, um Ressourcen, die von einer Anwendung benötigt werden, dynamisch zuzuordnen."
   services=""
   documentationCenter="na"
   authors="dragon119"
   manager="masimms"
   editor=""
   tags=""/>

<tags
   ms.service="best-practice"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="04/28/2015"
   ms.author="masashin"/>

# Anleitungen für die automatische Skalierung

![](media/best-practices-auto-scaling/pnp-logo.png)

## Übersicht
Die automatische Skalierung ist der Prozess der dynamischen Zuweisung von Ressourcen, die von einer Anwendung benötigt werden, um Leistungsanforderungen und Vereinbarungen zum Servicelevel (SLAs) zu erfüllen und gleichzeitig Laufzeitkosten zu senken. Wächst der Umfang der Arbeit, kann eine Anwendung zusätzliche Ressourcen benötigen, um ihre Aufgaben rechtzeitig zu erledigen. Wenn der Bedarf abnimmt, können Ressourcen wieder abgezogen werden, um Kosten zu minimieren, während gleichzeitig eine angemessene Leistung beibehalten und SLAs erfüllt werden. Die automatische Skalierung nutzt die Flexibilität der in der Cloud gehosteten Umgebungen und senkt gleichzeitig den Verwaltungsaufwand, da kein Operator mehr erforderlich ist, der die Leistung des Systems ständig überwacht und Entscheidungen über das Hinzufügen und Entfernen von Ressourcen trifft.
> Die automatische Skalierung gilt für alle Ressourcen, die von einer Anwendung verwendet werden, nicht nur für die Compute-Ressourcen. Wenn Ihr System zum Beispiel Nachrichtenwarteschlangen zum Senden und Empfangen von Informationen verwendet, kann es beim Skalieren zusätzliche Warteschlangen erstellen.

## Skalierungstypen
Die Skalierung erfolgt in der Regel in einer von zwei Arten, nämlich vertikal oder horizontal:

- Die **vertikale Skalierung** (so genannte _Aufwärts- und Abwärtsskalierung_) erfordert, dass Sie die Hardware ändern (Kapazität und Leistung erweitern oder reduzieren) oder die Lösung mithilfe alternativer Hardware, die über die entsprechende Kapazität und Leistung verfügt, erneut bereitstellen. In einer Cloudumgebung befindet sich die Hardwareplattform in der Regel in einer virtualisierten Umgebung. Sofern die Bereitstellung der ursprünglichen Hardware nicht deutlich zu umfangreich war (mit den daraus entstehenden Vorabkosten), umfasst die vertikale Aufwärtsskalierung dieser Umgebung die Bereitstellung leistungstärkerer Ressourcen und danach das Verschieben des Systems auf diese neuen Ressourcen. Die vertikale Skalierung ist häufig ein Prozess mit vielen Unterbrechungen, für den es erforderlich ist, dass das System während der erneuten Bereitstellung vorübergehend nicht verfügbar ist. Es ist u. U. möglich, das ursprüngliche System weiter auszuführen, während die neue Hardware bereitgestellt und online gestellt wird. Allerdings wird es wahrscheinlich Unterbrechungen beim Verarbeiten der Übergänge von der alten zur neuen Umgebung geben. Die automatische Skalierung wird in der Regel nicht zum Implementieren einer vertikalen Skalierungsstrategie verwendet.
- Die **horizontale Skalierung** (so genannte _Hoch- und Herunterkalierung_) erfordert das Bereitstellen der Lösung auf zusätzlichen oder weniger Ressourcen, bei denen es sich normalerweise um Standardressourcen handelt, nicht um leistungsstarke Systeme. Die Lösung kann weiter ohne Unterbrechung ausgeführt werden, während diese Ressourcen bereitgestellt werden. Wenn der Bereitstellungsprozess abgeschlossen ist, können Kopien der Elemente, aus denen die Lösung besteht, auf diesen zusätzlichen Ressourcen bereitgestellt und verfügbar gemacht werden. Fällt der Bedarf, können die zusätzlichen Ressourcen freigegeben werden, nachdem die Elemente, die diese Ressourcen verwenden, ordnungsgemäß heruntergefahren wurden. Viele cloudbasierte Systeme, einschließlich Microsoft Azure, unterstützen die Automatisierung dieser Form der Skalierung.

## Implementieren einer Strategie für die automatische Skalierung
Das Implementieren einer Strategie für die automatische Skalierung umfasst in der Regel die folgenden Komponenten und Prozesse:

- Instrumentation und Überwachen von Systemen auf Anwendungs-, Dienst- und Infrastrukturebene, die Schlüsselmetriken erfassen, wie z. B. Antwortzeiten, Warteschlangenlängen, CPU-Nutzung und Speichernutzung.
- Entscheidungsfindungslogik, die die überwachten Skalierungsfaktoren für vordefinierte Systemschwellenwerte oder Zeitpläne auswerten und Entscheidungen zur Skalierung treffen kann.
- Komponenten, die für die Durchführung von Aufgaben im Zusammenhang mit der Skalierung des Systems zuständig sind, zum Beispiel das Bereitstellen oder Entfernen von Ressourcen.
- Testen, Überwachen und Optimieren der Strategie für die automatische Skalierung, um sicherzustellen, dass sie wie erwartet funktioniert.

Die meisten cloudbasierten Umgebungen, wie z. B. Microsoft Azure, stellen integrierte Mechanismen für die automatische Skalierung in häufig auftretenden Szenarios bereit. Wenn die Umgebung oder der Dienst, die bzw. den Sie verwenden, die notwendige automatische Skalierungsfunktionalität nicht bereitstellt, oder wenn Sie extreme Anforderungen an die automatische Skalierung haben, die ihre Möglichkeiten übersteigen, kann eine benutzerdefinierte Implementierung notwendig sein, um Betriebs- und Systemmetriken zu erfassen und zu analysieren und so relevante Daten zu identifizieren, um dann die Ressourcen entsprechend zu skalieren.

## Überlegungen zur Implementierung der automatischen Skalierung
Die automatische Skalierung ist keine sofortige Lösung. Durch das einfache Hinzufügen von Ressourcen zu einem System oder durch das Ausführen mehrerer Instanzen eines Prozesses wird nicht sichergestellt, dass sich die Leistung des Systems verbessert. Beim Entwerfen einer Strategie für die automatische Skalierung sollten Sie folgende Punkte berücksichtigen:

- Das System muss so entworfen werden, dass es horizontal skalierbar ist. Vermeiden Sie Annahmen über die Instanzaffinität. Entwerfen Sie keine Lösungen, für die der Code immer in einer bestimmten Instanz eines Prozesses ausgeführt werden muss. Setzen Sie beim horizontalen Skalieren eines Clouddiensts oder einer Website nicht voraus, dass eine Reihe von Anforderungen aus derselben Quelle immer an dieselbe Instanz weitergeleitet werden. Aus demselben Grund sollten Sie statusfreie Dienste entwerfen, um zu vermeiden, dass eine Reihe von Anforderungen von einer Anwendung immer an dieselbe Instanz eines Diensts weitergeleitet werden müssen. Beim Entwerfen eines Diensts, der Nachrichten aus einer Warteschlange liest und verarbeitet, sollten Sie nicht voraussetzen, dass eine bestimmte Instanz des Diensts eine bestimmte Nachricht verarbeitet, da die automatische Skalierung zusätzliche Instanzen eines Diensts starten kann, wenn die Warteschlangenlänge zunimmt. Das [Muster "Konkurrierende Consumer"](http://msdn.microsoft.com/library/dn568101.aspx) beschreibt, wie Sie dieses Szenario verarbeiten können.
- Wenn die Lösung einen lang andauernden Task implementiert, entwerfen Sie diesen Task so, dass er das horizontale Hoch- und Herunterskalieren unterstützt. Ohne angemessene Sorgfalt könnte ein solcher Task verhindern, dass eine Instanz eines Prozesses ordnungsgemäß heruntergefahren wird, wenn das System horizontal herunterskaliert wird, oder es könnten Daten verloren gehen, wenn der Prozess abgebrochen wird. Im Idealfall sollten Sie einen lang andauernden Task umgestalten und die Verarbeitung in kleinere, einzelne Segmente aufteilen. Das [Muster "Pipes und Filter"](http://msdn.microsoft.com/library/dn568100.aspx) stellt ein entsprechendes Beispiel bereit. Alternativ können Sie einen Prüfpunktmechanismus implementieren, der Zustandsinformationen zum Task in regelmäßigen Abständen aufzeichnet und diesen Zustand in einem dauerhaften Speicher ablegt, auf den jede Instanz des Prozesses, der den Task ausführt, zugreifen kann. Wenn der Prozess heruntergefahren wird, kann die von ihm ausgeführte Arbeit auf diese Weise am letzten Prüfpunkt mithilfe einer anderen Instanz fortgesetzt werden.
- Wenn Hintergrundtasks auf separaten Compute-Instanzen ausgeführt werden, z. B. in Workerrollen der von Clouddiensten gehosteten Anwendung, müssen Sie möglicherweise verschiedene Teile der Anwendung mit verschiedenen Skalierungsrichtlinien skalieren. Beispielsweise müssen Sie möglicherweise zusätzliche UI-Compute-Instanzen bereitstellen, ohne die Anzahl der Compute-Instanzen im Hintergrund zu erhöhen oder zu reduzieren. Wenn Sie verschiedene Dienstebenen anbieten (z. B. Standard- und Premium-Servicepakete), müssen Sie die Compute-Ressourcen für Premium-Servicepakete möglicherweise aggressiver als für Standardpakete horizontal hochskalieren, um SLAs einzuhalten.
- Sie können beispielsweise die Länge der Warteschlange verwenden, über die die UI und Hintergrund-Compute-Instanzen zur Unterstützung der Strategie für die automatische Skalierung kommunizieren. Dies ist der beste Indikator für ein Ungleichgewicht oder Unterschied zwischen der aktuellen Arbeitslast und der Verarbeitungskapazität des Hintergrundtasks.
- Wenn Sie Ihre Strategie für die automatische Skalierung auf Leistungsindikatoren basieren, die Geschäftsprozesse messen, z. B. die Anzahl der Bestellungen pro Stunde oder die durchschnittliche Ausführungszeit einer komplexen Transaktion, stellen Sie sicher, dass Sie die Beziehung zwischen den Ergebnissen dieser Typen von Indikatoren und den tatsächlichen Compute-Kapazitätsanforderungen vollständig verstehen. Es kann erforderlich sein, mehr als eine Komponente oder Compute-Einheit als Reaktion auf Änderungen in den Unternehmensprozess-Leistungsindikatoren zu skalieren.  
- Um die exzessive Skalierung eines Systems zu verhindern und um die Kosten für das Ausführen mehrerer tausend Instanzen zu vermeiden, sollten Sie die maximale Anzahl von Instanzen, die automatisch hinzugefügt werden können, begrenzen. Die meisten Mechanismen für die automatische Skalierung ermöglichen Ihnen das Angeben der minimalen und der maximalen Anzahl der Instanzen für eine Regel. Darüber hinaus sollten Sie die Funktionalität, die das System bereitstellt, möglicherweise vorsichtig reduzieren, wenn die maximale Anzahl von Instanzen bereitgestellt wurde und das System überlastet ist.
- Bedenken Sie, dass die automatische Skalierung möglicherweise nicht der optimale Mechanismus zum Verarbeiten einer plötzlich zunehmenden Arbeitsauslastung ist. Das Bereitstellen und Starten neuer Instanzen eines Diensts und das Hinzufügen von Ressourcen zu einem System dauert einige Zeit, und wenn die zusätzlichen Ressourcen verfügbar sind, kann die Auslastungsspitze schon wieder vorbei sein. In diesem Szenario kann es besser sein, den Dienst zu drosseln. Weitere Informationen finden Sie im [Drosselungsmuster](http://msdn.microsoft.com/library/dn589798.aspx).
- Umgekehrt gilt: Wenn Sie die Kapazität für die Verarbeitung aller Anforderungen bei einer schnellen Änderung des Volumens nicht benötigen und wenn die Kosten kein Hauptfaktor sind, können Sie auch eine aggressive Strategie zur automatischen Skalierung verwenden, die zusätzliche Instanzen schneller startet. Oder Sie verwenden eine geplante Richtlinie, die eine ausreichende Anzahl von Instanzen startet, um die maximale Auslastung zu erreichen, bevor diese Auslastung erwartet wird.
- Der Mechanismus für die automatische Skalierung sollte den Prozess der automatischen Skalierung überwachen und Details der einzelnen Ereignisse der automatischen Skalierung (was das Ereignis ausgelöst hat, welche Ressourcen hinzugefügt oder entfernt wurden und wann) protokollieren. Wenn Sie einen benutzerdefinierten Mechanismus für die automatische Skalierung erstellen, stellen Sie sicher, dass diese Funktion enthalten ist. Die Informationen können analysiert werden, um die Effektivität der Strategie für die automatische Skalierung zu messen und ggf. zu optimieren – sowohl kurzfristig, wenn die Nutzungsmuster offensichtlicher werden, als auch langfristig, wenn sich das Unternehmen vergrößert oder sich die Anforderungen der Anwendung weiterentwickeln. Wenn eine Anwendung die definierte Obergrenze für die automatische Skalierung erreicht, kann der Mechanismus auch einen Operator warnen, der manuell zusätzliche Ressourcen starten kann, wenn die Lage dies erfordert. Beachten Sie, dass der Operator unter diesen Umständen auch für das manuelle Entfernen dieser Ressourcen nach dem Abklingen die Arbeitsauslastung zuständig sein kann.

## Automatische Skalierung in einer Azure-Lösung
Es gibt mehrere Optionen zum Konfigurieren der automatischen Skalierung für Ihre Azure-Lösungen:

- **Automatische Azure-Skalierung**. Diese Funktion unterstützt die gängigsten Skalierungsszenarien basierend auf einem Zeitplan und löst optional Skalierungsvorgänge auf Grundlage von Laufzeitmetriken aus (z. B. Prozessorauslastung, Warteschlangenlänge oder integrierte und benutzerdefinierte Leistungsindikatoren). Sie können einfache automatische Skalierungsrichtlinien für eine Lösung schnell und problemlos mit dem Azure-Verwaltungsportal konfigurieren, und Sie können die Azure Monitoring Services-Verwaltungsbibliothek zum Konfigurieren von Regeln für die automatische Skalierung mit einer präziseren Kontrolle konfigurieren. Weitere Informationen finden Sie im Abschnitt [Die Azure Monitoring Services-Verwaltungsbibliothek](#the-azure-monitoring-services-management-library).
- **Eine benutzerdefinierte Lösung** basierend auf den Diagnose-, Überwachungs- und Dienstverwaltungsfunktionen von Azure. Sie können z. B. die Azure-Diagnose, benutzerdefinierten Code oder das [System Center Management Pack für Azure](http://www.microsoft.com/download/details.aspx?id=38414) für die kontinuierliche Überwachung der Leistung der Anwendung verwenden. Zum Hoch- und Herunterskalieren können Sie die [Azure Service Management-REST-API](http://msdn.microsoft.com/library/azure/ee460799.aspx), die [Microsoft Azure-Verwaltungsbibliotheken](https://www.nuget.org/packages/Microsoft.WindowsAzure.Management.Libraries) oder den [Anwendungsblock für die automatische Skalierung](http://msdn.microsoft.com/library/hh680892%28v=pandp.50%29.aspx) verwenden. Die Metriken für das Auslösen eines Skalierungsvorgangs können von jedem integrierten bzw. benutzerdefinierten Leistungsindikator oder einer anderen Instrumentation stammen, den bzw. die Sie in der Anwendung implementieren. Eine benutzerdefinierte Lösung ist aber nicht einfach zu implementieren und sollte nur berücksichtigt werden, wenn keine der vorherigen Methoden Ihre Anforderungen erfüllen kann. Beachten Sie, dass der Anwendungsblock für die automatische Skalierung ein Open-Source-Framework ist und nicht direkt von Microsoft unterstützt wird.
- **Dienste von Drittanbietern**, wie z. B. [Paraleap AzureWatch](http://www.paraleap.com/AzureWatch), mit denen Sie eine Lösung auf Grundlage von Zeitplänen, Dienstauslastungen und Leistungsindikatoren, benutzerdefinierten Regeln und Kombinationen von verschiedenen Regeltypen skalieren können.

Beachten Sie Folgendes, wenn Sie sich für eine Lösung für die automatische Skalierung entscheiden:

- Verwenden Sie die integrierten Funktionen für die automatische Skalierung der Plattform, wenn sie Ihre Anforderungen erfüllen können. Überlegen Sie sich andernfalls, ob Sie wirklich komplexere Skalierungsfunktionen benötigen. Einige Beispiele für zusätzliche Anforderungen, die über die von der integrierten Funktion für die automatische Skalierung angebotenen hinausgehen, bieten möglicherweise eine präzisere Steuerung, verschiedene Methoden zum Erkennen von auslösenden Ereignissen für die Skalierung, die abonnementübergreifende Skalierung, das Skalieren anderer Ressourcentypen und mehr.
- Überlegen Sie, ob Sie die Auslastung der Anwendung mit ausreichender Genauigkeit prognostizieren können, um sich nur auf die geplante automatische Skalierung zu verlassen (Hinzufügen und Entfernen von Instanzen, um prognostizierten Bedarfsspitzen gerecht zu werden). Verwenden Sie, falls dies nicht möglich ist, die reaktive automatische Skalierung basierend auf Metriken, die zur Laufzeit erfasst werden, um der Anwendung das Verarbeiten unvorhersehbarer Bedarfsänderungen zu ermöglichen. Normalerweise werden diese Ansätze allerdings kombiniert. Erstellen Sie z. B. eine Strategie, die Ressourcen wie z. B. Server, Speicher und Warteschlangen basierend auf einem Zeitplan der Zeiten hinzufügt, von denen Sie wissen, dass die Anwendung am stärksten ausgelastet ist. Dadurch wird sichergestellt, dass Kapazität bei Bedarf verfügbar ist, ohne dass Verzögerungen auftreten, wenn neue Instanzen gestartet werden. Definieren Sie darüber hinaus für jede geplante Regel die Metriken, die das reaktive automatische Skalieren während des Zeitraums zulassen, um sicherzustellen, dass die Anwendung nachhaltige aber unvorhersehbare Bedarfsspitzen verarbeiten kann.
- Die Beziehung zwischen Metriken und Kapazitätsanforderungen ist häufig schwer zu verstehen, insbesondere dann, wenn eine Anwendung zum ersten Mal bereitgestellt wird. Stellen Sie zu Beginn etwas mehr Kapazität bereit, und überwachen und optimieren Sie dann die Regeln für die automatische Skalierung, um die Kapazität besser auf die tatsächliche Auslastung abzustimmen.

### Verwenden der automatischen Azure-Skalierung
Mit der automatischen Azure-Skalierung können Sie Optionen für das horizontale Skalieren einer Lösung konfigurieren. Die automatische Azure-Skalierung kann Anwendungsinstanzen von Azure Cloud Services-Web- und Workerrollen, Azure Mobile Services und Azure Web Sites automatisch hinzufügen und entfernen. Sie kann außerdem die automatische Skalierung durch Starten und Beenden von Instanzen von virtuellen Azure-Computern aktivieren. Eine Strategie für die automatische Azure-Skalierung besteht aus Gruppen mit Faktoren:

- Die zeitplanbasierte automatische Skalierung, die sicherstellen kann, dass zusätzliche Instanzen für erwartete Auslastungsspitzen verfügbar sind und horizontal herunterskaliert werden können, sobald diese Auslastungsspitze vorbei ist. Dadurch können Sie sicherstellen, dass Sie über ausreichende Instanzen verfügen, die bereits ausgeführt werden, ohne auf eine Reaktion des Systems auf die Auslastung zu warten.
- Die metrikbasierte automatische Skalierung, die auf Faktoren wie die durchschnittliche CPU-Auslastung während der letzten Stunde oder auf den Rückstand von Nachrichten reagiert, die die Lösung in einer Azure-Speicher- oder Service Bus-Warteschlange verarbeitet. Dadurch kann die Anwendung getrennt von den Regeln für die geplante automatische Skalierung reagieren, um ungeplante oder unvorhergesehene Änderungen beim Bedarf abzufangen.

Beachten Sie bei der Verwendung der automatischen Azure-Skalierung Folgendes:

- Ihre Strategie für die automatische Skalierung kombiniert die zeitplanbasierte und die metrikbasierte Skalierung. Sie können beide Arten von Regeln für einen Dienst angeben, sodass eine Anwendung nach einem Zeitplan und als Reaktion auf Änderungen in der Auslastung skaliert werden kann.
- Sie sollten die Regeln für die automatische Azure-Skalierung konfigurieren und dann die Leistung der Anwendung im zeitlichen Verlauf überwachen. Verwenden Sie die Ergebnisse dieser Überwachung, um die Art und Weise anzupassen, in der das System bei Bedarf skaliert wird. Allerdings sollten Sie bedenken, dass die automatische Skalierung nicht sofort geschieht – es dauert einige Zeit, um auf eine Metrik, wie z. B. die durchschnittliche CPU-Auslastung, die einen angegebenen Schwellenwert überschreitet (oder unterschreitet), zu reagieren.
- Automatische Skalierungsregeln, die einen Erkennungsmechanismus basierend auf einem gemessenen Auslöserattribut (z. B. CPU-Nutzung oder Warteschlangenlänge) verwenden, nutzen einen aggregierten Wert über die Zeit anstatt die unmittelbaren Werte, um eine Aktion für die automatische Skalierung auszulösen. Standardmäßig ist das Aggregat ein Durchschnitt der Werte. Dies verhindert, dass das System zu schnell reagiert oder eine schnelle Oszillation verursacht. Außerdem wird so Zeit für neue Instanzen ermöglicht, die automatisch gestartet und in den ausgeführten Modus versetzt werden, sodass keine zusätzlichen automatischen Skalierungsaktionen auftreten, während die neuen Instanzen gestartet werden. Für Clouddienste und virtuelle Computer ist der Standardzeitraum für die Aggregation 45 Minuten. Es kann also 45 Minuten dauern, bis die Metrik die automatische Skalierung als Reaktion auf Bedarfsspitzen auslöst. Sie können den Aggregationszeitraum mit dem SDK ändern. Beachten Sie aber, dass Zeiträume unterhalb von 25 Minuten zu unvorhersehbaren Ergebnissen führen können (weitere Informationen finden Sie unter [Automatische Skalierung von Clouddiensten nach CPU-Prozentsatz mit der Azure Monitoring Services-Verwaltungsbibliothek](http://rickrainey.com/2013/12/15/auto-scaling-cloud-services-on-cpu-percentage-with-the-windows-azure-monitoring-services-management-library/)). Für Azure Web Sites ist der Durchschnittszeitraum viel kürzer, sodass neue Instanzen in etwa fünf Minuten nach einer Änderung an der durchschnittlichen Auslöseaktion zur Verfügung stehen.
- Wenn Sie die automatische Skalierung über das SDK statt über das Webportal konfigurieren, können Sie einen detaillierteren Zeitplan angeben, in dem die Regeln aktiv sind. Sie können auch eigene Metriken erstellen und diese mit oder ohne vorhandenen in Ihren Regeln für die automatische Skalierung verwenden. Sie können beispielsweise alternative Leistungsindikatoren verwenden, z. B. die Anzahl der Anforderungen pro Sekunde oder die durchschnittliche Arbeitsspeicherverfügbarkeit. Sie können auch benutzerdefinierte Leistungsindikatoren verwenden, die bestimmte Geschäftsprozesse messen. Weitere Informationen finden Sie im Abschnitt [Die Azure Monitoring Services-Verwaltungsbibliothek](#the-azure-monitoring-services-management-library).
- Bei der automatischen Skalierung von virtuellen Azure-Computern müssen Sie eine Anzahl von Instanzen des virtuellen Computers bereitstellen, die der maximalen Anzahl entspricht, für die Sie den Start der automatischen Skalierung zulassen. Diese Instanzen müssen Teil derselben Verfügbarkeitsgruppe sein. Der Mechanismus für das automatische Skalieren virtueller Computer erstellt oder löscht keine Instanzen des virtuellen Computers. Stattdessen starten und beenden die von Ihnen konfigurierten automatischen Skalierungsregeln eine entsprechende Anzahl dieser Instanzen. Weitere Informationen finden Sie unter [Automatisches Skalieren einer für die Ausführung von Webrollen, Workerrollen oder virtuellen Computern konzipierten Anwendung](cloud-services-how-to-scale.md#autoscale).
- Wenn neue Instanzen nicht gestartet werden können, vielleicht weil das Maximum für ein Abonnement erreicht wurde (z. B. die maximale Anzahl von Kernen beim Verwenden des Diensts für virtuelle Computer), oder wenn ein Fehler während des Starts auftritt, kann das Portal anzeigen, dass ein automatischer Skalierungsvorgang erfolgreich war. Allerdings zeigen nachfolgende **ChangeDeploymentConfiguration**-Ereignisse, die im Portal angezeigt werden, nur, dass ein Dienststart angefordert wurde, und es gibt kein Ereignis, um anzugeben, dass er erfolgreich abgeschlossen wurde.
- In der automatischen Azure-Skalierung können Sie die Webportal-UI verwenden, um Ressourcen, wie zum Beispiel SQL-Datenbankinstanzen und Warteschlangen, mit einer Compute-Dienstinstanz zu verknüpfen. Dadurch erhalten Sie einen einfacheren Zugriff auf die separaten Konfigurationsoptionen für das manuelle und das automatische Skalieren für jede einzelne verknüpfte Ressource. Weitere Informationen finden Sie unter [Gewusst wie: Verknüpfen einer Ressource mit einem Clouddienst](cloud-services-how-to-manage.md#linkresources) auf der Seite zum Verwalten von Clouddiensten und auf der Seite [Skalieren einer Anwendung](cloud-services-how-to-scale.md).
- Wenn Sie mehrere Richtlinien und Regeln konfigurieren, besteht die Möglichkeit, dass sie miteinander in Konflikt stehen. Die automatische Azure-Skalierung verwendet die folgenden Konfliktlösungsregeln, um sicherzustellen, dass immer eine ausreichende Anzahl von Instanzen ausgeführt wird:
  - Vorgänge mit horizontalem Hochskalieren haben immer Vorrang vor Vorgängen mit horizontalem Herunterskalieren.
  - Wenn Konflikte durch horizontales Herunterskalieren entstehen, hat die Regel Vorrang, die den größten Anstieg bei der Anzahl der Instanzen initiiert.
  - Wenn Konflikte durch horizontales Hochskalieren entstehen, hat die Regel Vorrang, die die kleinste Abnahme bei der Anzahl der Instanzen initiiert.

<a name="the-azure-monitoring-services-management-library"></a>

### Die Azure Monitoring Services-Verwaltungsbibliothek
Sie können die Dienstverwaltungs-API verwenden, um die automatische Azure-Skalierung mit einer präziseren Steuerung zu konfigurieren und auf Funktionen zuzugreifen, die nicht über das Webportal zur Verfügung stehen. Der Zugriff auf diese API erfolgt direkt als REST-Web-API oder über die Azure Monitoring Services-Verwaltungsbibliothek.

Die automatische Azure-Skalierung wird durch Angabe der automatischen Skalierungsprofile für Cloud Services-Rollen, Verfügbarkeitsgruppen für virtuelle Computer, Azure-Websites (als Serverfarmen in einem Webspace) oder Azure Mobile Services konfiguriert. Jedes Profil, von denen ein Ziel bis zu 20 besitzen kann, gibt Folgendes an:

- Zeitpunkt der Anwendung (über ein Wiederholungs- oder ein festes Datumsintervall)
- Zulässige Anzahl von Instanzen (minimale, maximale und Standardanzahl)
- Aktive Regeln für die automatische Skalierung

Das Webportal ermöglicht die Konfiguration eines festen Satzes mit Profilen, bei denen vor allem zwischen Tag-/Nacht- und Wochentag-/Wochenendprofilen unterschieden wird, mit einem einzelnen Skalierungsregelpaar, das auf CPU-Nutzung oder Warteschlangenlänge basiert. Wenn Sie stattdessen die Dienstverwaltungs-API verwenden, können Sie differenziertere Anwendbarkeitsdaten für Profile konfigurieren und bis zu zehn Regeln mit Auslösern basierend auf einer im Azure Monitoring Service verfügbaren Metrik angeben.

Regeln für die automatische Skalierung bestehen aus einem Auslöser, der angibt, wann eine Regel gilt, und einer Skalierungsaktion, die die an der Konfiguration des Ziels vorzunehmende Änderung angibt. Zum Zeitpunkt der Texterstellung war die einzige unterstützte Aktion eine Erhöhung oder Senkung der Instanzanzahl.

Die Auslöser für die automatische Skalierungsregeln basieren auf verfügbaren Metriken. Werte für die konfigurierten Metriken werden in regelmäßigen Abständen in den entsprechenden Quellen geprüft, wie in der Konfiguration für die automatische Skalierung definiert ist. Wenn jede Regel aus einem aktiven Profil ausgewertet wird, werden die Werte der für den Auslöser angegebenen Metrik rechtzeitig und instanzübergreifend (falls zutreffend) aggregiert. Dieses Aggregat wird dann mit einem Schwellenwert verglichen, um anzugeben, ob die Regel gilt. Gültige Aggregate über die Zeit sind Durchschnitt (Standard), Minimum, Maximum, Letztes, gesamt und Anzahl. Gültige Aggregate über Instanzen sind Durchschnitt (Standard), Maximum und Minimum.

Die Metriken, die für Auslöser zur Verfügung stehen, sind Azure-Speicher und Service Bus-Warteschlangenlängen, die Standardleistungsindikatoren, die von der Azure-Diagnose veröffentlicht werden, und alle benutzerdefinierten Leistungsindikatoren, die von den einzelnen Rollen oder virtuellen Computern veröffentlicht werden. In einer Clouddienstlösung müssen Sie beim Umgang mit anderen Leistungsindikatoren als denen, die standardmäßig verfügbar sind, die Überwachungsebeneneinstellung in der Benutzeroberfläche von "Minimum" auf "Ausführlich" für den Dienst ändern.

Weitere Informationen finden Sie unter:

- Überwachung der SDK-[Klassenbibliothek](http://msdn.microsoft.com/library/azure/dn510414.aspx)
- [Konfigurieren von Leistungsindikatoren](http://msdn.microsoft.com/library/azure/dn535595.aspx)
- [Vorgänge bei der automatischen Skalierung](http://msdn.microsoft.com/library/azure/dn510374.aspx)
- [Hinzufügen von Einstellungen für die automatische Skalierung](http://msdn.microsoft.com/library/azure/dn510372.aspx)
- [Automatische Skalierung von Clouddiensten für die prozentuale CPU-Auslastung mit der Azure Monitoring Services-Verwaltungsbibliothek](http://rickrainey.com/2013/12/15/auto-scaling-cloud-services-on-cpu-percentage-with-the-windows-azure-monitoring-services-management-library/)
- [Verwenden der Azure Monitoring Services-Verwaltungsbibliothek zum Erstellen einer automatischen Skalierungsregel](http://blogs.msdn.com/b/cie/archive/2014/02/20/how-to-use-windows-azure-monitoring-services-management-library-to-create-an-autoscale-rule.aspx)

## Zugehörige Muster und Anleitungen
Die folgenden Muster und Anleitungen können auch für Ihr Szenario relevant sein, wenn die automatische Skalierung implementiert wird:

- [Drosselungsmuster](http://msdn.microsoft.com/library/dn589798.aspx). Dieses Muster beschreibt, wie eine Anwendung weiterhin funktionieren und Vereinbarungen zum Servicelevel erfüllen kann, wenn eine Bedarfssteigerung eine extreme Belastung für Ressourcen mit sich bringt. Die Drosselung kann mit der automatischen Skalierung verwendet werden, um zu verhindern, dass ein System während des horizontalen Hochskalierens überlastet wird.
- [Muster "Konkurrierende Consumer"](http://msdn.microsoft.com/library/dn568101.aspx) Dieses Muster beschreibt das Implementieren eines Pools mit Dienstinstanzen für die Verarbeitung von Nachrichten von einer Anwendungsinstanz. Die automatische Skalierung kann zum Starten und Beenden von Dienstinstanzen entsprechend der erwarteten Arbeitslast verwendet werden. Dieser Ansatz ermöglicht ein System, mit dem mehrere Nachrichten gleichzeitig verarbeitet werden können. So wird der Durchsatz optimiert, Skalierbarkeit und Verfügbarkeit werden erhöht und die Arbeitsauslastung wird ausgeglichen.
- [Instrumentations- und Telemetrieanleitungen](http://msdn.microsoft.com/library/dn589775.aspx). Instrumentation und Telemetrie sind wichtig für das Sammeln von Informationen, die den Prozess der automatischen Skalierung unterstützen können.

## Weitere Informationen
- [Skalieren einer Anwendung](cloud-services-how-to-scale.md)
- [Automatisches Skalieren einer für die Ausführung von Webrollen, Workerrollen oder virtuellen Computern konzipierten Anwendung](cloud-services-how-to-manage.md#linkresources)
- [Gewusst wie: Verknüpfen einer Ressource mit einem Clouddienst](cloud-services-how-to-manage.md#linkresources)
- [Skalieren verknüpfter Ressourcen](cloud-services-how-to-scale.md#scalelink)
- [Azure Monitoring Services-Verwaltungsbibliothek](http://www.nuget.org/packages/Microsoft.WindowsAzure.Management.Monitoring)
- [Azure-Dienstverwaltungs-REST-API](http://msdn.microsoft.com/library/azure/ee460799.aspx)
- [Vorgänge bei der automatischen Skalierung](http://msdn.microsoft.com/library/azure/dn510374.aspx)
- [Microsoft.WindowsAzure.Management.Monitoring.Autoscale-Namespace](http://msdn.microsoft.com/library/azure/microsoft.windowsazure.management.monitoring.autoscale.aspx)
- Die Dokumentation zur [automatischen Anwendungsblockskalierung](http://msdn.microsoft.com/library/hh680892%28v=pandp.50%29.aspx) und Schlüsselszenarien auf MSDN.

<!---HONumber=July15_HO3-->