---
title: Referenzarchitektur für Azure DevTest Labs für ein Unternehmen
description: Dieser Artikel enthält einen Leitfaden für eine Azure DevTest Labs-Referenzarchitektur in einem Unternehmen.
services: devtest-lab,virtual-machines,lab-services
documentationcenter: na
author: spelluru
manager: femila
ms.service: lab-services
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/12/2019
ms.author: spelluru
ms.reviewer: christianreddington,anthdela,juselph
ms.openlocfilehash: bcb154f7cffb92ef23fc2606e1f604bb12f8d1a3
ms.sourcegitcommit: bf509e05e4b1dc5553b4483dfcc2221055fa80f2
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 04/22/2019
ms.locfileid: "59996610"
---
# <a name="azure-devtest-labs---reference-architecture-for-an-enterprise"></a>Azure DevTest Labs: Referenzarchitektur für ein Unternehmen
Dieser Artikel enthält eine Referenzarchitektur für die Bereitstellung einer Azure DevTest Labs-basierten Lösung in einem Unternehmen. Die Architektur umfasst lokale Konnektivität über ExpressRoute, ein Remotedesktopgateway für die Remoteanmeldung bei virtuellen Computern, Konnektivität mit einem Artefaktrepository für private Artefakte sowie andere PaaS-Dienste, die in einem Lab verwendet werden.

![Referenzarchitektur](./media/devtest-lab-reference-architecture/reference-architecture.png)

## <a name="architecture"></a>Architektur
Die Referenzarchitektur enthält folgende Schlüsselelemente:

- **Azure Active Directory (AAD):** Azure DevTest Labs verwendet den [Azure Active Directory-Dienst für die Identitätsverwaltung](../active-directory/fundamentals/active-directory-whatis.md). Wenn Benutzern Zugriff auf eine DevTest Labs-basierte Umgebung gewährt wird, müssen zwei wichtige Punkte berücksichtigt werden:
    - **Ressourcenverwaltung:**  Ermöglicht den Zugriff auf das Azure-Portal, um Ressourcen zu verwalten. Dies beinhaltet unter anderem das Erstellen virtueller Computer und das Erstellen von Umgebungen sowie das Starten, Beenden, Neustarten, Löschen und Anwenden von Artefakten. Hierzu wird in Azure die rollenbasierte Zugriffssteuerung (Role-Based Access Control, RBAC) verwendet. Außerdem wird eine Rollenzuweisung für den Benutzer angewendet, und es werden die Ressource sowie Zugriffsebenenberechtigungen festgelegt.
    - **Virtuelle Computer (Netzwerkebene):**  In der Standardkonfiguration verwenden virtuelle Computer ein lokales Administratorkonto.  Ist eine Domäne verfügbar ([AAD Domain Services](../active-directory-domain-services/active-directory-ds-overview.md), eine lokale Domäne oder eine cloudbasierte Domäne), können Computer in diese Domäne eingebunden werden. Nach der Einbindung in die Domäne können Benutzer ihre domänenbasierte Identität verwenden, um eine Verbindung mit den virtuellen Computern herzustellen.
- **Lokale Konnektivität:** Im obigen Architekturdiagramm wird [ExpressRoute](../expressroute/expressroute-introduction.md) verwendet. Sie können aber auch ein [Site-to-Site-VPN](../vpn-gateway/vpn-gateway-about-vpn-gateway-settings.md) verwenden. Dies ist in Unternehmen durchaus üblich, für DevTest Labs allerdings nicht erforderlich. Es ist nur erforderlich, wenn aus irgendeinem Grund eine Verbindung mit Unternehmensressourcen hergestellt werden muss. Gängige Gründe wären etwa: 
    - Es sind lokale Daten vorhanden, die noch nicht in die Cloud verschoben werden können.
    - Die virtuellen Computer des Labs sollen in die lokale Domäne eingebunden sein.
    - Der gesamte ein- und ausgehende Netzwerkdatenverkehr der Cloudumgebung muss aus Sicherheits-/Konformitätsgründen eine lokale Firewall durchlaufen.
- **Netzwerksicherheitsgruppen:** Eine gängige Methode, um den Datenverkehr an die Cloudumgebung (oder innerhalb der Cloudumgebung) auf der Grundlage von Quell- und Ziel-IP-Adressen einzuschränken, ist die Verwendung einer [Netzwerksicherheitsgruppe](../virtual-network/security-overview.md). Dadurch kann beispielsweise sichergestellt werden, dass nur Netzwerkdatenverkehr aus dem Unternehmensnetzwerk die Netzwerke des Labs erreicht.
- **Remotedesktopgateway:**  Unternehmen blockieren ausgehende Remotedesktopverbindungen in der Regel an der Unternehmensfirewall. Es gibt verschiedene Möglichkeiten, um in DevTest Labs die Konnektivität mit der cloudbasierten Umgebung zu ermöglichen. Dazu zählen beispielsweise die Verwendung eines [Remotedesktopgateways](/windows-server/remote/remote-desktop-services/desktop-hosting-logical-architecture) (Aufnahme der statischen IP-Adresse für den Gateway-Lastenausgleich in eine Whitelist) oder das [Weiterleiten des gesamten eingehenden RDP-Datenverkehrs](../vpn-gateway/vpn-gateway-forced-tunneling-rm.md) über die ExpressRoute-/Site-to-Site-VPN-Verbindung. Dies ist eine allgemeine Überlegung bei der Planung einer Bereitstellung von DevTest Labs im Unternehmen.
- **Azure-Netzwerk (VNETs, Subnetze):**  Die Topologie des [Azure-Netzwerks](../networking/networking-overview.md) ist ein weiteres wichtiges Element der DevTest Labs-Architektur. Sie ermöglicht (oder verhindert) die Kommunikation von Ressourcen aus Labs, den Zugriff auf die lokale Umgebung sowie den Zugriff auf das Internet. Das Architekturdiagramm zeigt die gängigste DevTest Labs-Verwendung. Bei dieser Variante sind alle Labs über [VNET-Peering](../virtual-network/virtual-network-peering-overview.md) unter Verwendung eines [Hub-Spoke-Modells](/azure/architecture/reference-architectures/hybrid-networking/hub-spoke) mit ExpressRoute-/Site-to-Site-VPN-Verbindung mit der lokalen Umgebung verbunden. Da DevTest Labs das Azure-Netzwerk jedoch direkt nutzt, gelten bei der Einrichtung der Netzwerkinfrastruktur keinerlei Einschränkungen.
- **DevTest Labs:**  DevTest Labs ist ein wichtiger Bestandteil der allgemeinen Architektur. Informationen zu diesem Dienst finden Sie unter [Informationen zu Azure DevTest Labs](devtest-lab-overview.md).
- **Virtuelle Computer und andere Ressourcen (SaaS, PaaS und IaaS):**  Eine der wichtigsten Workloads, die von DevTest Labs unterstützt wird, sind virtuelle Computer und andere Azure-Ressourcen.  Mit DevTest Labs können Unternehmen schnell und einfach Zugriff auf Azure-Ressourcen gewähren (einschließlich auf virtuelle Computer und andere Azure-Ressourcen).  Weitere Informationen zum Zugriff auf Azure finden Sie [hier](devtest-lab-developer-lab.md) (für Entwickler) bzw. [hier](devtest-lab-test-env.md) (für Tester).

## <a name="scalability-considerations"></a>Überlegungen zur Skalierbarkeit
DevTest Labs verfügt zwar nicht über integrierte Kontingente oder Grenzwerte, für andere Azure-Ressourcen, die in typischen Vorgängen eines Labs genutzt werden, gelten jedoch [Kontingente auf Abonnementebene](../azure-subscription-service-limits.md). In einer typischen Unternehmensbereitstellung sind daher mehrere Azure-Abonnements erforderlich, um eine umfangreiche Bereitstellung von DevTest Labs abzudecken. Zu den Kontingenten, die von Unternehmen am häufigsten erreicht werden, zählen folgende:

- **Ressourcengruppen:**  In der Standardkonfiguration erstellt DevTest Labs jeweils eine Ressourcengruppe für jeden neuen virtuellen Computer oder für eine Umgebung, die der Benutzer mithilfe des Diensts erstellt. Abonnements können [maximal 980 Ressourcengruppen](../azure-subscription-service-limits.md#subscription-limits---azure-resource-manager) enthalten. Dies ist also die Obergrenze für virtuelle Computer und Umgebungen in einem Abonnement. Darüber hinaus sollten noch zwei weitere Konfigurationen berücksichtigt werden:
    - **[Alle virtuellen Computer in einer Ressourcengruppe:](resource-group-control.md)**  Diese Option hilft zwar bei der Einhaltung des Ressourcengruppenlimits, wirkt sich aber auf das Ressourcentyplimit pro Ressourcengruppe aus.
    - **Verwenden gemeinsamer öffentlicher IP-Adressen:**  Alle virtuellen Computer mit gleicher Größe und Region werden in der gleichen Ressourcengruppe platziert. Hierbei handelt es sich um einen Mittelweg zwischen Ressourcengruppenkontingenten und Ressourcentypkontingenten pro Ressourcengruppe, wenn virtuelle Computer öffentliche IP-Adressen besitzen dürfen. 
- **Ressourcen pro Ressourcengruppe, pro Ressourcentyp:** Das Standardlimit für [Ressourcen pro Ressourcengruppe, pro Ressourcentyp](../azure-subscription-service-limits.md#resource-group-limits) liegt bei 800.  Bei Verwendung der Konfiguration „Alle virtuellen Computer in einer Ressourcengruppe“ wird dieses Abonnementlimit deutlich früher erreicht – insbesondere, wenn die virtuellen Computer über zahlreiche zusätzliche Datenträger verfügen.
- **Speicherkonten:** Ein Lab in DevTest Labs verfügt standardmäßig über ein Speicherkonto, und das Azure-Kontingent für [Anzahl von Speicherkonten pro Region und Abonnement](../azure-subscription-service-limits.md#storage-limits) liegt bei 250. Die Obergrenze für die Anzahl von DevTest Labs-Instanzen in der gleichen Region liegt also ebenfalls bei 250.
- **Rollenzuweisungen:** Mit einer Rollenzuweisung wird einem Benutzer oder Dienstprinzipal Zugriff auf eine Ressource gewährt (Besitzer, Ressource, Berechtigungsstufe). In Azure gilt ein [Limit von 2.000 Rollenzuweisungen pro Abonnement](../azure-subscription-service-limits.md#role-based-access-control-limits). In der Standardkonfiguration erstellt der DevTest Labs-Dienst eine Ressourcengruppe für jeden virtuellen Computer, und der Besitzer erhält die Berechtigung **Besitzer** für den virtuellen DevTest Labs-Computer und die Berechtigung **Leser** für die Ressourcengruppe.  Dadurch verwendet jeder neu erstellte virtuelle Computer neben den Rollenzuweisungen, die erstellt wurden, um Benutzern Berechtigungen für das Lab zu gewähren, zwei zusätzliche Rollenzuweisungen.
- **API-Lesevorgänge/-Schreibvorgänge:** Azure und DevTest Labs können mit verschiedenen Methoden (REST-APIs, PowerShell, Befehlszeilenschnittstelle, Azure SDK usw.) automatisiert werden. Diese Automatisierung kann dazu führen, dass ein weiteres Limit für API-Anforderungen erreicht wird. Pro Abonnement sind bis zu [12.000 Leseanforderungen und 1.200 Schreibanforderungen pro Stunde](../azure-resource-manager/resource-manager-request-limits.md) zulässig.  Dieses Limit muss bei der Automatisierung von DevTest Labs berücksichtigt werden.

## <a name="manageability-considerations"></a>Überlegungen zur Verwaltbarkeit
Die administrative Benutzeroberfläche von DevTest Labs eignet sich hervorragend für die Arbeit mit einem einzelnen Lab. In einem Unternehmen sind jedoch wahrscheinlich mehrere Azure-Abonnements und zahlreiche Labs vorhanden. Konsistente Änderungen an allen Labs müssen daher mithilfe von Skripting/Automatisierung vorgenommen werden.  Im Anschluss folgen einige Beispiele und Empfehlungen für die Verwaltung von DevTest Labs-Bereitstellungen:

- **Änderungen an Labeinstellungen:** Ein gängiges Szenario ist die Aktualisierung einer bestimmten Labeinstellung in allen Labs der Bereitstellung. Dies kann beispielsweise erforderlich sein, wenn eine neue VM-Instanzgröße verfügbar wird und alle Labs aktualisiert werden müssen, um sie zuzulassen.  Es empfiehlt sich, Änderungen dieser Art mithilfe von Azure PowerShell-Skripts, über die Azure-Befehlszeilenschnittstelle oder mithilfe von REST-APIs zu automatisieren.  
- **Persönliches Zugriffstoken für das Artefaktrepository:**  Persönliche Zugriffstoken für ein Git-Repository sind in der Regel nur für einen bestimmten Zeitraum (90 Tage, ein Jahr, zwei Jahre) gültig. Zur Gewährleistung der Kontinuität ist es wichtig, entweder das persönliche Zugriffstoken zu verlängern oder ein neues persönliches Zugriffstoken zu erstellen und es mittels Automatisierung auf alle Labs anzuwenden.
- **Einschränken von Änderungen an einer Labeinstellung:**  Dies ist häufig erforderlich, wenn eine bestimmte Einstellung (etwa das Zulassen der Verwendung von Marketplace-Images) eingeschränkt werden muss. Hierzu können Sie entweder eine Azure-Richtlinie (zur Verhinderung von Änderungen für diesen Ressourcentyp) verwenden oder eine benutzerdefinierte Rolle erstellen und diese anstelle der Besitzerrolle für das Lab gewähren. Diese Möglichkeit steht für nahezu alle Einstellungen im Lab (interner Support, Labankündigung, zulässige VM-Größen usw.) zur Verfügung.
- **Vorschreiben einer Namenskonvention für virtuelle Computer:** Virtuelle Computer, die Teil der cloudbasierten Entwicklungs- und Testumgebung sind, sollen in der Regel problemlos erkennbar sein. Hierzu können Sie [Azure Policy](https://github.com/Azure/azure-policy/tree/master/samples/TextPatterns/allow-multiple-name-patterns) verwenden.

Wichtiger Hinweis: DevTest Labs nutzt zugrunde liegende Ressourcen in Azure (Netzwerk, Datenträger, Compute usw.), die in Azure auf die gleiche Weise verwaltet werden.  Die Azure-Richtlinie gilt also beispielsweise für virtuelle Computer, die in einem Lab erstellt werden. Informationen zur Compliance virtueller Computer finden Sie im Azure Security Center. Der Azure Backup-Dienst kann unter anderem regelmäßige Sicherungen für virtuelle Computer im Lab erstellen. 

## <a name="security-considerations"></a>Sicherheitshinweise
Azure DevTest Labs nutzt vorhandene Ressourcen in Azure (Compute, Netzwerk usw.) und profitiert somit automatisch von all den praktischen integrierten Sicherheitsfeatures der Plattform. Wenn Sie also etwa alle eingehenden Remotedesktopverbindungen schützen möchten, indem Sie nur Verbindungen aus dem Unternehmensnetzwerk zulassen, müssen Sie dazu lediglich dem virtuellen Netzwerk auf dem Remotedesktopgateway eine Netzwerksicherheitsgruppe hinzufügen. Der einzige zusätzliche Sicherheitsüberlegung im Zusammenhang mit Azure DevTest Labs ist die Berechtigungsebene für Teammitglieder, die die Labs tagtäglich verwenden.  Hierzu werden im Allgemeinen die Berechtigungen [„Besitzer“ und „DevTest Labs-Benutzer“](devtest-lab-add-devtest-user.md) erteilt. Weitere Informationen zu diesen Rollen finden Sie unter [Hinzufügen von Besitzern und Benutzern in Azure DevTest Labs](devtest-lab-add-devtest-user.md).

## <a name="next-steps"></a>Nächste Schritte
Lesen Sie den nächsten Artikel in dieser Reihe: [Zentrales Hochskalieren Ihrer Azure DevTest Labs-Infrastruktur](devtest-lab-guidance-scale.md)
