---
title: "Vorhersagbarer Wartungsbedarf in der Luft- und Raumfahrt mit Azure – Cortana Intelligence-Lösungsvorlage | Microsoft-Dokumentation"
description: "Eine Lösungsvorlage mit Microsoft Cortana Intelligence zur Vorhersage des Wartungsbedarfs in der Luft- und Raumfahrt, in Versorgungsunternehmen und im Transportwesen."
services: cortana-analytics
documentationcenter: 
author: fboylu
manager: jhubbard
editor: cgronlun
ms.assetid: 2e8b66db-91eb-432b-b305-6abccca25620
ms.service: cortana-analytics
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/14/2017
ms.author: fboylu
ms.openlocfilehash: aafa395f8c0593d9597f74cd5cd2a41f26897c6f
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 10/11/2017
---
# <a name="cortana-intelligence-solution-template-playbook-for-predictive-maintenance-in-aerospace-and-other-businesses"></a>Playbook für die Cortana Intelligence-Lösungsvorlage zum Vorhersagen des Wartungsbedarfs in der Luft- und Raumfahrt und weiteren Branchen
## <a name="executive-summary"></a>Kurzfassung
Die vorbeugende Wartung ist eine der am stärksten nachgefragten Anwendungen von Predictive Analytics und bietet eindeutige Vorteile, z. B. das sehr hohe Kosteneinsparpotenzial. Dieses Playbook soll als Referenz für Lösungen zur vorbeugenden Wartung dienen, wobei der Schwerpunkt auf repräsentativen Anwendungsfällen liegt.
Leser lernen die häufigsten Geschäftsszenarien der vorbeugenden Wartung kennen. Es geht um die Anforderungen in Bezug auf die Qualifizierung von Geschäftsproblemen für diese Lösungen, die für die Problemlösung erforderlichen Daten, Verfahren für die Vorhersagemodellierung zum Erstellen von Lösungen mit diesen Daten und bewährte Methoden mit Beispiel-Lösungsarchitekturen.
Außerdem werden die Details der entwickelten Vorhersagemodelle beschrieben, z. B. Featureentwicklung, Modellentwicklung und Leistungsbewertung. Im Wesentlichen sind in diesem Playbook die geschäftlichen und analytischen Richtlinien zusammengefasst, die für eine erfolgreiche Entwicklung und Bereitstellung von Lösungen für die vorbeugende Wartung benötigt werden. Dieser Leitfaden soll Ihnen dabei helfen, eine erste Lösung zu erstellen. Die Cortana Intelligence Suite und vor allem Azure Machine Learning sollen dabei als Ausgangspunkte für Ihre langfristige Strategie zur Vorhersage des Wartungsbedarfs dienen. Die Dokumentation zur Cortana Intelligence Suite und zu Azure Machine Learning finden Sie unter [Cortana Analytics](http://www.microsoft.com/server-cloud/cortana-analytics-suite/overview.aspx) und [Azure Machine Learning](https://azure.microsoft.com/services/machine-learning/).

> [!TIP]
> Eine technische Anleitung zum Implementieren dieser Lösungsvorlage finden Sie unter [Technische Anleitung für die Cortana Intelligence-Lösungsvorlage für vorbeugende Wartung](cortana-analytics-technical-guide-predictive-maintenance.md).
> Unter [Architektur der Cortana Intelligence-Lösungsvorlage für vorbeugende Wartung](cortana-analytics-architecture-predictive-maintenance.md)können Sie eine Grafik der Architekturübersicht zu dieser Vorlage herunterladen.
> 
> 

## <a name="playbook-overview-and-target-audience"></a>Playbook-Übersicht und -Zielgruppe
Dieses Playbook ist so aufgebaut, dass es für Leser mit und ohne technischen Hintergrund und mit unterschiedlichen Wissensständen und Interessen in Bezug auf die vorbeugende Wartung geeignet ist. Im Playbook werden sowohl die allgemeinen Aspekte der unterschiedlichen Arten von Lösungen für die vorbeugende Wartung als auch die Details der Implementierung abgedeckt. Der Inhalt ist so abgestimmt, dass er für die Zielgruppe, die nur an der Lösung und der Art der Anwendungen interessiert ist, und die Zielgruppe, die diese Lösungen implementieren möchte und daher die technischen Details benötigt, gleichermaßen geeignet ist.

Für den Großteil des Inhalts in diesem Playbook werden keine besonderen Kenntnisse im Bereich der Data Science vorausgesetzt. Für einige Teile des Playbooks ist aber eine gewisse Vertrautheit mit Data Science-Konzepten erforderlich, um den Implementierungsdetails folgen zu können. Es werden Data Science-Grundkenntnisse benötigt, um vom Material in diesen Abschnitten umfassend zu profitieren.

Die erste Hälfte des Playbooks enthält eine Einführung in Anwendungen für die vorbeugende Wartung, Informationen zur Qualifizierung einer Lösung für die vorbeugende Wartung, eine Sammlung häufiger Anwendungsfälle mit den Details des Geschäftsproblems, die Daten zu diesen Anwendungsfällen und die geschäftlichen Vorteile einer Implementierung dieser Lösungen für die vorbeugende Wartung. Für diese Abschnitte benötigen Sie keine technischen Kenntnisse in Bezug auf Predictive Analytics.

In der zweiten Hälfte des Playbooks geht es um die Arten von Verfahren für die Vorhersagemodellierung für Anwendungen zur vorbeugenden Wartung und die Implementierung dieser Modelle anhand von Beispielen aus den Anwendungsfällen, die im ersten Teil des Playbooks beschrieben werden. Dies wird veranschaulicht, indem die Schritte für die Vorverarbeitung der Daten durchgegangen werden, z. B. die bewährten Methoden in Bezug auf Datenbezeichnung und Featureentwicklung, Modellauswahl, Training/Testing und Leistungsbewertung. Diese Abschnitte sind für Leser mit technischem Hintergrund geeignet.

## <a name="predictive-maintenance-in-iot"></a>Vorbeugende Wartung im Internet der Dinge (IoT)
Die Auswirkungen von ungeplanten Ausfällen von Ausrüstung können für Unternehmen sehr weitreichend sein. Es ist entscheidend, für den ausfallsicheren Betrieb der Feldausrüstung zu sorgen, um die Auslastung und Leistung zu erhöhen, indem teure, ungeplante Ausfallzeiten minimiert werden. Das simple Warten auf das Eintreten eines Ausfalls kann sich heutzutage kein Unternehmen mehr leisten. Um wettbewerbsfähig zu bleiben, suchen Unternehmen nach neuen Wegen zur Maximierung der Asset-Leistung, indem sie dafür die über verschiedene Kanäle gesammelten Daten nutzen. Eine wichtige Möglichkeit zum Analysieren dieser Informationen ist die Anwendung von Predictive Analytics-Verfahren, bei denen Verlaufsmuster zum Vorhersagen zukünftiger Ergebnisse verwendet werden. Eine der am häufigsten eingesetzten Lösungen dieser Art wird als „vorbeugende Wartung“ bezeichnet. Sie kann im Allgemeinen so definiert werden (ohne dass dies die einzig gültige Definition ist), dass die Möglichkeit eines Asset-Ausfalls in naher Zukunft vorausgesagt wird. Die Assets können dann überwacht werden, um Fehler proaktiv zu erkennen und Abhilfemaßnahmen zu ergreifen, bevor die Fehler auftreten. Mit diesen Lösungen werden Fehlermuster erkannt, um die Assets zu ermitteln, für die das größte Ausfallrisiko besteht. Diese frühzeitige Identifizierung von Problemen ermöglicht die Bereitstellung eingeschränkter Wartungsressourcen auf kosteneffektivere Weise und eine Verbesserung der Qualitäts- und Lieferkettenprozesse.

Seit der vermehrten Nutzung der Anwendungen für das Internet der Dinge hat die vorbeugende Wartung in der Branche immer mehr Aufmerksamkeit erregt, da die Techniken zur Datenerfassung und -verarbeitung so weit gereift sind, dass alle Arten von Daten in Batches oder in Echtzeit generiert, übertragen, gespeichert und analysiert werden können. Diese Techniken ermöglichen die einfache Entwicklung und Bereitstellung von End-to-End-Lösungen mit erweiterten Analytics-Lösungen, wobei Lösungen für die vorbeugende Wartung wohl den größten Vorteil bieten.

Geschäftliche Probleme im Bereich der vorbeugenden Wartung reichen von einem hohen Betriebsrisiko aufgrund von unerwarteten Fehlern bis zur eingeschränkten Erkennbarkeit der Hauptursache für Probleme in komplexen Geschäftsumgebungen. Die meisten dieser Probleme lassen sich anhand der folgenden geschäftlichen Fragen kategorisieren:

* Wie hoch ist die Wahrscheinlichkeit, dass ein Ausrüstungsteil in naher Zukunft ausfällt?
* Welche Restnutzungsdauer hat das Gerät?
* Was sind die Ursachen für Fehler, und welche Wartungsaktionen sollten durchgeführt werden, um diese Probleme zu beheben?

Mithilfe der Vorhersage des Wartungsbedarfs können Unternehmen:

* die betrieblichen Risiken verringern und die Rendite von Assets erhöhen, indem Fehler vor ihrem Auftreten erkannt werden
* unnötige, zyklische Wartungsvorgänge reduzieren und die Wartungskosten steuern
* ihr Markenimage allgemein verbessern und negative Berichterstattung und aus Kundenverlusten resultierende Umsatzeinbuße vermeiden
* Lagerkosten durch Reduzierung der Lagerbestände verringern, indem der Zeitpunkt der Nachbestellung vorhergesagt wird
* Grundmuster verschiedener Wartungsprobleme erkennen

Lösungen für die vorbeugende Wartung können Unternehmen Key Performance Indicators liefern, z. B. Integritätsbewertungen zum Überwachen des Asset-Zustands in Echtzeit, eine Schätzung der Restlebensdauer von Assets, eine Empfehlung für Aktivitäten zur proaktiven Wartung und geschätzte Bestelldaten für Ersatzteile.

## <a name="qualification-criteria-for-predictive-maintenance"></a>Qualifikationskriterien für vorbeugende Wartung
Es ist wichtig, darauf hinzuweisen, dass mit der vorbeugenden Wartung nicht alle Anwendungsfälle oder Geschäftsprobleme effektiv gelöst werden können. Beispiele für wichtige Qualifikationskriterien sind: Klärung der Frage, ob das Problem vorhersagbar ist, Vorhandensein eines eindeutigen Aktionsplans zum Verhindern von Fehlern, wenn diese im Voraus erkannt werden, und – was am wichtigsten ist – Vorhandensein von Daten in ausreichender Qualität zur Unterstützung des Anwendungsfalls. Hier konzentrieren wir uns auf die Datenanforderungen zur Erstellung einer erfolgreichen Lösung für die vorbeugende Wartung.

Beim Erstellen von Vorhersagemodellen verwenden wir Verlaufsdaten, um das Modell zu trainieren. Damit können dann versteckte Muster erkannt werden, und diese Muster können in den zukünftigen Daten später identifiziert werden. Diese Modelle werden anhand von Beispielen trainiert, die anhand ihrer Features und des Vorhersageziels beschrieben werden. Mit dem trainierten Modell sollen dann Vorhersagen zum Ziel getroffen werden, indem lediglich die Features der neuen Beispiele untersucht werden. Es ist wichtig, dass mit dem Modell die Beziehung zwischen Features und dem Vorhersageziel abgedeckt wird. Zum Trainieren eines effektiven Machine Learning-Modells benötigen wir Trainingsdaten. Diese müssen Features enthalten, die in Bezug auf das Vorhersageziel wirklich über Aussagekraft für die Vorhersage verfügen. Dies bedeutet, dass die Daten für das Vorhersageziel relevant sein sollten, um genaue Vorhersagen treffen zu können.

Wenn das Ziel beispielsweise darin besteht, Fehler für Zugräder vorherzusagen, sollten die Trainingsdaten radbezogene Features enthalten (z.B. Telemetriedaten zum Integritätsstatus von Rädern, die Kilometerleistung, Waggonlast usw.). Falls das Ziel aber darin besteht, den Ausfall von Zugmotoren vorherzusagen, benötigen wir wahrscheinlich andere Trainingsdaten mit motorbezogenen Features. Vor dem Erstellen von Vorhersagemodellen muss der Experte im Unternehmen die Anforderungen an die Datenrelevanz verstehen und das Domänenwissen bereitstellen, das benötigt wird, um relevante Teilmengen von Daten für die Analyse auszuwählen.

Wenn untersucht wird, ob sich ein Geschäftsproblem für eine Lösung zur Vorhersage des Wartungsbedarfs eignet, werden drei entscheidende Datenquellen zu Rate gezogen:

1. Fehlerverlauf: Normalerweise kommen Fehlerereignisse bei Anwendungen für die vorbeugende Wartung sehr selten vor. Beim Erstellen von Vorhersagemodellen zum Vorhersagen von Fehlern muss der Algorithmus das normale Betriebsmuster und das Fehlermuster im Rahmen des Trainingsprozesses erlernen. Daher ist es wichtig, dass die Trainingsdaten eine ausreichende Anzahl von Beispielen in beiden Kategorien enthalten, um diese beiden unterschiedlichen Muster erlernen zu können. Aus diesem Grund müssen die Daten über eine ausreichende Anzahl von Fehlerereignissen verfügen. Fehlerereignisse sind in Wartungsdatensätzen und Verläufen des Teileaustauschs enthalten, und auch Anomalien in den Trainingsdaten können als Fehler verwendet werden, die von Experten der jeweiligen Domäne identifiziert werden.
2. Wartungs-/Reparaturverlauf: Eine wichtige Datenquelle für Lösungen zur vorbeugenden Wartung ist der ausführliche Wartungsverlauf des Assets, der Informationen zu den ausgetauschten Komponenten, durchgeführten Wartungsaktivitäten usw. enthält. Es ist äußerst wichtig, diese Ereignisse zu erfassen. Sie wirken sich auf die Leistungsabfallmuster aus, und wenn diese Informationen fehlen, kommt es zu irreführenden Ergebnissen.
3. Maschinenzustände: Um voraussagen zu können, wie viele Tage (Stunden, Kilometer, Transaktionen usw.) lang eine Maschine noch betrieben werden kann, bevor sie ausfällt, wird angenommen, dass sich der Integritätsstatus der Maschine während des Betriebs im Laufe der Zeit verschlechtert. Daher erwarten wir, dass die Daten zeitbezogene Features enthalten, mit denen dieses Alterungsmuster und alle Anomalien erfasst werden, die zu einer Verschlechterung führen. In IoT-Anwendungen sind die Telemetriedaten unterschiedlicher Sensoren ein gutes Beispiel. Um vorhersagen zu können, ob eine Maschine innerhalb eines bestimmten Zeitraums ausfällt, sollte der Leistungsabfalltrend in den Daten während dieses Zeitraums idealerweise erfasst werden, bevor der Ausfall wirklich eintritt.

Darüber hinaus benötigen wir Daten, die sich direkt auf die Betriebsbedingungen des Asset-Ziels für die Vorhersage beziehen. Die Entscheidung für das Ziel basiert sowohl auf den geschäftlichen Anforderungen als auch auf der Datenverfügbarkeit. Wenn wir wieder die Vorhersage des Zugradausfalls als Beispiel heranziehen, können wir vorhersagen, „ob für das Rad ein Fehler auftritt“ oder „ob für den gesamten Zug ein Fehler auftritt“. Im ersteren Fall geht es um eine bestimmte Komponente, während im letzteren Fall der Ausfall des Zugs im Vordergrund steht. Die zweite Frage ist allgemeiner gehalten, sodass für deren Beantwortung deutlich mehr unterschiedliche Datenelemente als bei der ersten Frage erforderlich sind. Dies erschwert die Erstellung eines Modells. Im Gegensatz dazu kann das Vorhersagen von Radfehlern durch das alleinige Untersuchen der groben Daten zum Zugzustand nicht praktikabel sein, da diese Daten keine Informationen auf Bauteilebene enthalten. Im Allgemeinen ist es besser, spezielle Fehlerereignisse vorherzusagen, und keine allgemeinen Fehler.

Eine Frage, die im Zusammenhang mit Fehlerverlaufsdaten häufig gestellt wird, lautet: Wie viele Fehlerereignisse sind zum Trainieren eines Modells erforderlich, und welche Zahl wird als „hoch genug“ angesehen? Es gibt keine eindeutige Antwort auf diese Frage. Bei vielen Predictive Analytics-Szenarien ist es normalerweise die Qualität der Daten, die vorgibt, was akzeptabel ist. Wenn das Dataset keine Features enthält, die für die Vorhersage von Ausfällen relevant sind, ist die Erstellung eines guten Modells unter Umständen auch dann nicht möglich, wenn viele Fehlerereignisse vorhanden sind. Als Faustregel gilt aber: Je mehr Fehlerereignisse vorhanden sind, desto besser ist das Modell. Das Aufstellen einer groben Schätzung, wie viele Fehlerbeispiele erforderlich sind, ist auf jeden Fall sehr kontext- und datenabhängig. Dieses Problem wird im Abschnitt zum Umgang mit unausgeglichenen Datasets erläutert, wo wir Methoden zur Lösung des Problems vorschlagen, wenn nicht genügend Fehler vorhanden sind.

## <a name="sample-use-cases"></a>Beispiele für Anwendungsfälle
In diesem Abschnitt geht es um Anwendungsfälle für die vorbeugende Wartung aus mehreren Branchen, z. B. Luft- und Raumfahrt, Versorgungsunternehmen und Transport. In jedem Unterabschnitt wird näher auf die einzelnen Anwendungsfälle dieser Bereiche eingegangen, und es werden ein Geschäftsproblem, die dazugehörigen Daten und die Vorteile einer Lösung zur vorbeugenden Wartung erläutert.

### <a name="aerospace"></a>Luft- und Raumfahrt
#### <a name="use-case-1-flight-delay-and-cancellations"></a>Anwendungsfall 1: Verzögerung und Ausfälle von Flügen
##### <a name="business-problem-and-data-sources"></a>*Geschäftsproblem und Datenquellen*
Eines der größten Probleme von Fluggesellschaften sind die erheblichen Kosten, die entstehen, wenn sich Flüge aufgrund von mechanischen Problemen verzögern. Wenn mechanische Fehler nicht behoben werden können, kann es auch zu einem Ausfall von Flügen kommen. Dies ist mit sehr hohen Kosten verbunden. Verzögerungen führen unter anderem zu Problemen bei Planung und Ablauf, einer Verschlechterung des Rufs und Unzufriedenheit bei den Kunden. Fluggesellschaften sind besonders darin interessiert, mechanische Fehler dieser Art vorhersagen zu können, um die Zahl der Verzögerungen oder Ausfälle von Flügen zu reduzieren. Das Ziel der Lösungen für die vorbeugende Wartung besteht bei diesen Anwendungsfällen darin, die Wahrscheinlichkeit vorherzusagen, mit der es für ein Flugzeug zu Verzögerungen oder Ausfällen kommt. Hierzu werden relevante Datenquellen herangezogen, z.B. Informationen zum Wartungsverlauf und zur Flugroute. Die beiden vorrangigen Datenquellen für diesen Anwendungsfall sind die so genannten „Flight Legs“ und „Page Logs“. Zu Flight Leg-Daten gehören Daten zu den Flugroutendetails, z. B. Datum und Uhrzeit von Abflug und Ankunft, Start- und Zielflughafen usw. Zu den Page Log-Daten gehören Fehler- und Wartungscodes, die vom Wartungspersonal aufgezeichnet werden.

##### <a name="business-value-of-the-predictive-model"></a>*Geschäftlicher Nutzen des Vorhersagemodells*
Mit den verfügbaren Verlaufsdaten wurde ein Vorhersagemodell erstellt. Es wurde ein Multi-Klassifizierungsalgorithmus verwendet, um die Art des mechanischen Problems vorherzusagen, das innerhalb der nächsten 24 Stunden zu einer Verzögerung oder einem Ausfall eines Flugs führt. Basierend auf dieser Vorhersage können die erforderlichen Wartungsarbeiten durchgeführt werden, um das Risiko zu mindern, während ein Flugzeug gewartet wird, und so mögliche Verzögerungen und Ausfälle zu verhindern. Mit dem Azure Machine Learning-Webdienst können die Vorhersagemodelle nahtlos und leicht in die vorhandenen Betriebsplattformen von Fluggesellschaften integriert werden. 

#### <a name="use-case-2-aircraft-component-failure"></a>Anwendungsfall 2: Ausfall von Flugzeugbauteilen
##### <a name="business-problem-and-data-sources"></a>*Geschäftsproblem und Datenquellen*
Flugzeugtriebwerke sind äußerst empfindliche und teure Ausrüstungsteile, und der Austausch von Triebwerkteilen ist in der Luftfahrtbranche eine der häufigsten Wartungsaufgaben. Bei Wartungslösungen für Fluggesellschaften ist eine sorgfältige Verwaltung der Lagerverfügbarkeit, Lieferung und Planung von Bauteilen unerlässlich. Die Möglichkeit, Daten zur Zuverlässigkeit von Bauteilen zu sammeln, führt zu einer erheblichen Verringerung der Investitionskosten. Die wichtigsten Datenquelle für diesen Anwendungsfall sind die Telemetriedaten einer Reihe von Sensoren im Flugzeug, die Informationen zum Zustand des Flugzeugs liefern. Außerdem wurden Wartungsdatensätze verwendet, um zu ermitteln, wann Bauteile ausgefallen sind und ein Austausch vorgenommen wurde.

##### <a name="business-value-of-the-predictive-model"></a>Geschäftlicher Nutzen des Vorhersagemodells
Es wurde ein Klassifizierungsmodell mit mehreren Klassen erstellt, mit dem die Wahrscheinlichkeit eines Ausfalls aufgrund eines bestimmten Bauteils innerhalb des nächsten Monats vorhergesagt werden kann. Durch den Einsatz dieser Lösungen können Fluggesellschaften die Reparaturkosten für Bauteile reduzieren, die Lagerverfügbarkeit von Bauteilen verbessern, die Lagerbestände der zugehörigen Assets reduzieren und die Wartungsplanung verbessern.

### <a name="utilities"></a>Versorgungsunternehmen
#### <a name="use-case-1-atm-cash-dispense-failure"></a>Anwendungsfall 1: Ausfall der Geldausgabe an Geldautomaten
##### <a name="business-problem-and-data-sources"></a>*Geschäftsproblem und Datenquellen*
Führungskräfte in Branchen mit hohem Asset-Einsatz weisen häufig darauf hin, dass das vorrangige Betriebsrisiko für ihr Unternehmen der unerwartete Ausfall der Assets ist. Der Ausfall von Maschinen, z. B. Geldautomaten in der Bankbranche, ist ein sehr bekanntes Problem, das häufig auftritt. Diese Arten von Problemen führen dazu, dass Lösungen für die vorbeugende Wartung bei den Betreibern dieser Maschinen sehr beliebt sind. Bei diesem Anwendungsfall besteht das Vorhersageproblem darin, dass eine Auszahlung am Geldautomaten aufgrund eines Fehlers der Ausgabevorrichtung unterbrochen wird, z.B. eines Papierstaus oder Bauteilausfalls. Wichtige Datenquellen für diesen Fall sind Sensordaten, mit denen Messungen während der Ausgabe der Banknoten durchgeführt werden, sowie die im Laufe der Zeit erfassten Wartungsdatensätze. Die Sensordaten umfassten Sensorwerte pro abgeschlossener Transaktion sowie Sensorwerte für jede ausgegebene Banknote. Die Sensordaten lieferten Messwerte wie Abstände zwischen Banknoten, Dicke, Transportweg von Banknoten usw. Die Wartungsdaten enthielten Fehlercodes und Reparaturinformationen. Diese wurden zum Identifizieren von Fehlern verwendet.

##### <a name="business-value-of-the-predictive-model"></a>*Geschäftlicher Nutzen des Vorhersagemodells*
Es wurden zwei Vorhersagemodelle erstellt, um Fehler bei den Geldausgabetransaktionen und Fehler bei der Ausgabe der einzelnen Banknoten während einer Transaktion vorherzusagen. Indem Transaktionsfehler im Voraus vorhergesagt werden können, können Geldautomaten proaktiv gewartet werden, um das Auftreten von Fehlern zu verhindern. Wenn bei der Vorhersage von Banknotenfehlern eine Transaktion vor dem Abschluss aufgrund eines Ausgabefehlers voraussichtlich fehlschlägt, kann es am besten sein, den Vorgang abzubrechen und den Kunden darüber zu informieren. Das Warten auf das Eintreffen des Wartungsdiensts nach dem Auftreten des Fehlers kann zu einer größeren Unzufriedenheit des Kunden führen.

#### <a name="use-case-2-wind-turbine-failures"></a>Anwendungsfall 2: Ausfall von Windturbinen
##### <a name="business-problem-and-data-sources"></a>*Geschäftsproblem und Datenquellen*
Aufgrund des gestiegenen Umweltbewusstseins haben sich Windturbinen zu einer der wichtigsten Quellen für die Energieerzeugung entwickelt und kosten normalerweise Millionen von Euro. Eines der wichtigsten Bauteile von Windturbinen ist der Generatormotor, der mit vielen Sensoren für die Überwachung des Turbinenzustands und -status ausgestattet ist. Die Sensordaten enthalten wertvolle Informationen. Sie können für die Erstellung eines Vorhersagemodells verwendet werden, um wichtige Key Performance Indicators (KPIs) vorhersagen zu können, z. B. die mittlere Zeitspanne bis zum Ausfall für Bauteile der Windturbine. Die Daten für diesen Anwendungsfall stammen von mehreren Windturbinen aus drei unterschiedlichen Farmen. Ein Jahr lang wurden die Messungen von fast 100 Sensoren für jede Turbine alle 10 Sekunden aufgezeichnet. Diese Messwerte umfassen Temperatur, Generatorgeschwindigkeit, Turbinenleistung und Generatorwicklung.

##### <a name="business-value-of-the-predictive-model"></a>*Geschäftlicher Nutzen des Vorhersagemodells*
Es wurden Vorhersagemodelle erstellt, um die Restlebensdauer für Generatoren und Temperatursensoren zu schätzen. Indem die Wahrscheinlichkeit für einen Ausfall vorhergesagt wurde, können sich die Techniker auf betroffene Turbinen konzentrieren, die voraussichtlich in Kürze ausfallen. Dies ist eine gute Erweiterung der normalen zeitbezogenen Wartungsabläufe.
Außerdem liefern Vorhersagemodelle Informationen über das Maß, in dem unterschiedliche Faktoren zur Wahrscheinlichkeit eines Ausfalls beitragen. Mit diesen Informationen können Unternehmen ein besseres Verständnis der Hauptursache von Problemen entwickeln.

#### <a name="use-case-3-circuit-breaker-failures"></a>Anwendungsfall 3: Ausfälle von Schutzschaltern
##### <a name="business-problem-and-data-sources"></a>*Geschäftsproblem und Datenquellen*
Elektrizitäts- und Gasunternehmen, die sich mit der Erzeugung, der Verteilung und dem Verkauf von elektrischer Energie beschäftigen, haben einen hohen Wartungsaufwand. Sie müssen sicherstellen, dass die Stromleitungen immer betriebsbereit sind, um die Lieferung von Energie an die Haushalte sicherzustellen. Ausfälle bei diesen Unternehmen sind kritisch, da von Stromversorgungsproblemen in den betroffenen Regionen nahezu alle Einrichtungen betroffen sind. Schutzschalter sind für Unternehmen dieser Art sehr wichtig. Es handelt sich hierbei um ein Bauteil, mit dem die elektrische Stromversorgung bei Problemen und Kurzschlüssen unterbrochen wird, um eine Beschädigung von Stromleitungen zu verhindern. Das Geschäftsproblem für diesen Anwendungsfall besteht darin, den Ausfall von Schutzschaltern anhand von Wartungsprotokollen, Befehlsverläufen und technischen Spezifikationen vorherzusagen.

Drei wichtige Datenquellen für diesen Fall sind Wartungsprotokolle, die korrigierende, vorbeugende und systembezogene Aktionen umfassen, Betriebsdaten, die automatische und manuelle Befehle für Schutzschalter umfassen (z. B. zum Öffnen und Schließen), sowie technische Spezifikationen zu den Eigenschaften der einzelnen Schutzschalter mit Baujahr, Ort, Modell usw.

##### <a name="business-value-of-the-predictive-model"></a>*Geschäftlicher Nutzen des Vorhersagemodells*
Lösungen zur vorbeugenden Wartung tragen zur Reduzierung von Reparaturkosten bei und verlängern den Lebenszyklus von Ausrüstungsteilen, z. B. Schutzschaltern. Außerdem tragen diese Modelle zur Verbesserung der Qualität des Stromnetzes bei, da sie rechtzeitige Warnungen ausgeben, mit denen die Zahl der unerwarteten Ausfälle verringert wird. Dies führt wiederum zu weniger Unterbrechungen der Stromversorgung.

#### <a name="use-case-4-elevator-door-failures"></a>Anwendungsfall 4: Ausfälle von Fahrstuhltüren
##### <a name="business-problem-and-data-sources"></a>*Geschäftsproblem und Datenquellen*
Die meisten großen Fahrstuhlunternehmen betreiben Millionen von Fahrstühlen weltweit. Um sich einen Wettbewerbsvorteil zu verschaffen, legen sie den Schwerpunkt auf die Zuverlässigkeit, da sie für die Kunden am wichtigsten ist. Indem die Unternehmen das Potenzial des Internet der Dinge nutzen und ihre Fahrstühle mit der Cloud verbinden und die Daten der Fahrstuhlsensoren und -systeme sammeln, können sie Daten in wertvolle Business Intelligence transformieren. Die Abläufe werden erheblich verbessert, da die vorbeugende und vorausschauende Wartung ermöglicht wird, die Wettbewerbern vielleicht noch nicht zur Verfügung steht. Die geschäftliche Anforderung besteht in diesem Fall darin, eine Knowledge Base-Vorhersageanwendung bereitzustellen, mit der die potenziellen Ursachen von Türausfällen vorhergesagt werden können. Die erforderlichen Daten für diese Implementierung umfassen drei Teile. Dies sind die statischen Features von Fahrstühlen (z. B. Bezeichner, vertraglich festgelegte Wartungshäufigkeit, Gebäudetyp usw.), Nutzungsinformationen (z. B. Anzahl von Türzyklen, durchschnittliche Schließdauer der Türen usw.) und Fehlerverlauf (Verlauf der Fehlerdatensätze mit der jeweiligen Ursache).

Mit Azure Machine Learning wurde ein Modell mit mehreren Klassen für die logistische Regression erstellt, um das Vorhersageproblem zu lösen. Als Features wurden die integrierten Daten zu statischen Features und die Nutzungsdaten verwendet, und die Ursachen aus den Datensätzen zum Fehlerverlauf wurden als Klassenbezeichnungen genutzt. Dieses Vorhersagemodell wird über eine App auf einem mobilen Gerät verwendet, das von Feldtechnikern zur Verbesserung der Effizienz eingesetzt wird. Wenn ein Techniker vor Ort beim Kunden einen Fahrstuhl repariert, kann er mit dieser App nach Ursachen und der besten Vorgehensweise bei der Wartungsarbeit suchen, um den Fahrstuhl so schnell wie möglich zu reparieren.

### <a name="transportation-and-logistics"></a>Transport und Logistik
#### <a name="use-case-1-brake-disc-failures"></a>Anwendungsfall 1: Ausfall von Bremsscheiben
##### <a name="business-problem-and-data-sources"></a>*Geschäftsproblem und Datenquellen*
Wartungsrichtlinien für Fahrzeuge enthalten häufig Maßnahmen zur Instandsetzung und vorbeugenden Wartung. Der Begriff „Instandsetzung“ impliziert, dass das Fahrzeug erst nach dem Auftreten eines Fehlers repariert wird. Es kann für den Fahrer eine hohe Beeinträchtigung darstellen, wenn ein unerwarteter Fehler auftritt und Zeit mit der Inanspruchnahme eines Mechanikers verschwendet wird. Für die meisten Fahrzeuge gilt außerdem eine Richtlinie für die vorbeugende Wartung, die bestimmte Inspektionen nach einem Zeitplan vorschreibt. Bei diesem Zeitpunkt wird aber nicht der tatsächliche Zustand der Fahrzeugsysteme berücksichtigt. Keiner dieser Ansätze ist geeignet, um Probleme vollständig zu beseitigen. Bei diesem speziellen Anwendungsfall geht es um die Vorhersage des Ausfalls von Bremsscheiben anhand von Daten, die über Sensoren im Reifensystem eines Fahrzeugs gesammelt werden. Damit werden der Fahrverlauf und andere Bedingungen nachverfolgt, denen das Fahrzeug ausgesetzt ist. Die wichtigste Datenquelle für diesen Fall sind die Sensordaten, die beispielsweise Messwerte zu Beschleunigung, Bremsmuster, Fahrstrecken, Geschwindigkeit usw. liefern. Mit diesen Informationen und anderen statischen Informationen, z. B. Fahrzeugmerkmalen, lassen sich gute Vorhersageelemente erstellen, die in einem Vorhersagemodell verwendet werden können. Andere wichtige Informationen sind die Fehlerdaten, die aus der Bestelldatenbank für die Teile stammen. (Sie werden verwendet, um die Bestelldaten und Mengen von Ersatzteilen zu speichern, wenn Fahrzeuge beim Händler gewartet werden.)

##### <a name="business-value-of-the-predictive-model"></a>*Geschäftlicher Nutzen des Vorhersagemodells*
Der geschäftliche Nutzen des Vorhersageansatzes ist in diesem Fall sehr hoch. Mit einem System für die vorbeugende Wartung kann ein Termin beim Händler anhand eines Vorhersagemodells geplant werden. Das Modell kann auf Sensorinformationen basieren, die den aktuellen Zustand des Fahrzeugs und den Fahrverlauf darstellen. Mit diesem Ansatz kann das Risiko unerwarteter Fehler verringert werden, die auch schon vor der nächsten regelmäßigen Wartung auftreten können.
Außerdem kann die Anzahl unnötiger vorbeugender Wartungsaktionen reduziert werden. Der Fahrer kann proaktiv informiert werden, dass in einigen Wochen unter Umständen der Austausch von Teilen erforderlich ist, und der Händler kann diese Informationen ebenfalls erhalten. Der Händler kann dann im Voraus ein individuelles Wartungspaket für den Fahrer vorbereiten.

#### <a name="use-case-2-subway-train-door-failures"></a>Anwendungsfall 2: Ausfall von U-Bahn-Türen
##### <a name="business-problem-and-data-sources"></a>*Geschäftsproblem und Datenquellen*
Einer der Hauptgründe für Verzögerungen und Probleme beim Betrieb von U-Bahnen sind Fehler bei Zugtüren. Die Vorhersage, ob es für einen Waggon zu einem Türausfall kommt, oder die Möglichkeit, die Anzahl der Tage bis zum nächsten Ausfall der Tür vorherzusagen, ist ein sehr wichtiges Mittel zur vorausschauenden Wartung. Die Wartung der Zugtüren lässt sich optimieren, und Ausfallzeiten können für den Zug reduziert werden.

#### <a name="data-sources"></a>Datenquellen
Die drei Datenquellen für diesen Anwendungsfall lauten: 

* **Trainieren von Ereignisdaten**, also die Verlaufsdatensätze von Trainingsereignissen 
* **Wartungsdaten**, z.B. Wartungstypen, Arbeitsauftragstypen und Prioritätscodes  
* **Datensätze zu Fehlern**

##### <a name="business-value-of-the-predictive-model"></a>*Geschäftlicher Nutzen des Vorhersagemodells*
Es wurden zwei Modelle erstellt, um die Wahrscheinlichkeit für einen Ausfall am nächsten Tag vorherzusagen, indem eine binäre Klassifizierung verwendet wurde, und um die Tage bis zum Ausfall vorherzusagen, indem die Regression verwendet wurde. Ähnlich wie in den vorherigen Fällen auch, stellen die Modelle eine hervorragende Gelegenheit dar, die Betriebsqualität zu verbessern und die Kundenzufriedenheit zu erhöhen, indem die regelmäßigen Wartungsmaßnahmen entsprechend erweitert werden.

## <a name="data-preparation"></a>Vorbereitung der Daten
### <a name="data-sources"></a>Datenquellen
Die üblichen Datenelemente derjenigen Probleme, die durch die Vorhersage des Wartungsbedarfs behandelt werden können, sind:

* Fehlerverlauf: der Fehlerverlauf eines Computers oder einer Komponente auf dem Computer.
* Wartungsverlauf: der Reparaturverlauf einer Maschine, z.B. Fehlercodes, vorherige Wartungsaktivitäten oder Komponentenersatz.
* Zustand der Maschine und Verwendung: der Betriebszustand einer Maschine, z.B. von Sensoren gesammelte Daten.
* Maschineneigenschaften: die Eigenschaften einer Maschine, z.B. Modulgröße, Marke und Modell, Standort.
* Eigenschaften des Operators: die Eigenschaften des Operators, z.B. Geschlecht, Erfahrungshintergrund.

Es ist möglich und in der Regel auch der Fall, dass der Fehlerverlauf im Wartungsverlauf enthalten ist, z. B. in Form von speziellen Fehlercodes oder Bestelldaten für Ersatzteile. In diesen Fällen können Fehler aus den Wartungsdaten extrahiert werden. Darüber hinaus können unterschiedliche Geschäftsbereiche über eine Vielzahl anderer Datenquellen verfügen, die sich auf Fehlermuster auswirken. Diese sind hier nicht erschöpfend aufgeführt. Ziehen Sie zu ihrer Ermittlung bei der Erstellung von Vorhersagemodellen die Experten des jeweiligen Bereichs heran.

Beispiele für die oben erwähnten Datenelemente von Anwendungsfällen sind:

Fehlerverlauf: Datum von Flugverzögerungen, Datum und Typ des Ausfalls von Flugzeugbauteilen, Fehler bei Abhebungen an Geldautomaten, Ausfall der Türen von Zügen/Fahrstühlen, Bestelldaten von Ersatzteilen für Bremsscheiben, Datum des Ausfalls von Windturbinen und Fehler bei Schutzschalterbefehlen.

Wartungsverlauf: Fehlerprotokolle für Flüge, Fehlerprotokolle für Transaktionen von Geldautomaten, Datensätze für die Zugwartung, z. B. Wartungstyp, Kurzbeschreibung usw., und Wartungsdatensätze für Schutzschalter.

Maschinenzustand und -nutzung: Flugrouten und -zeiten, Sensordaten von Flugzeugtriebwerken, Sensormessungen von Transaktionen an Geldautomaten, Daten zu Zugereignissen, Sensormessungen von Windturbinen, Fahrstühlen und vernetzten Fahrzeugen.

Maschinenmerkmale: technische Spezifikationen von Schutzschaltern, z. B. Spannungspegel, geografischer Standort oder Fahrzeugmerkmale, z. B. Marke, Modell, Motorgröße, Reifentypen, Produktionsstandort usw.

Anhand der obigen Datenquellen lässt sich feststellen, dass die beiden Hauptdatentypen der vorbeugenden Wartung zeitbezogene Daten und statische Daten sind.
Fehlerverlauf, Maschinenzustände, Reparaturverlauf und Nutzungsverlauf sind fast immer mit Zeitstempeln verbunden, mit denen der Zeitpunkt der Erfassung für jedes Datenelement angegeben wird. Bei Merkmalen von Maschinen und Bedienern handelt es sich normalerweise um statische Daten, da hiermit meist die technischen Spezifikationen von Maschinen oder die Eigenschaften von Bedienern beschrieben werden. Es ist möglich, dass sich diese Merkmale im Laufe der Zeit ändern, und wenn dies der Fall ist, sollten sie wie Datenquellen mit Zeitstempel behandelt werden.

### <a name="merging-data-sources"></a>Zusammenführen von Datenquellen
Bevor wir in die Featureentwicklung oder den Bezeichnungsprozess eintauchen, müssen wir unsere Daten zuerst so vorbereiten, wie dies für die Erstellung von Features erforderlich ist. Das Ziel besteht letztendlich darin, einen Datensatz für jede Zeiteinheit und jedes Asset zu generieren und die Features und Bezeichnungen in den Machine Learning-Algorithmus einfließen zu lassen. Es sind einige Vorverarbeitungsschritte erforderlich, um dieses eindeutige endgültige Dataset zu erstellen. Der erste Schritt ist das Aufteilen des Datenerfassungszeitraums in Zeiteinheiten, wobei jeder Datensatz zu einer Zeiteinheit für ein Asset gehört. Die Datenerfassung kann auch in andere Einheiten unterteilt werden, z.B. Aktionen. Der Einfachheit halber verwenden wir für alle weiteren Erläuterungen Zeiteinheiten.

Die Maßeinheit für die Zeit kann Sekunden, Minuten, Stunden, Tage, Monate, Zyklen, Kilometer oder Transaktionen lauten. Dies richtet sich nach der Effizienz der Datenvorbereitung und der Veränderung von Assets von einer Zeiteinheit zur nächsten oder anderen besonderen Faktoren des Bereichs. Anders ausgedrückt: Die Zeiteinheit muss nicht der Häufigkeit der Datenerfassung entsprechen, da die Daten in vielen Fällen von einer Zeiteinheit zur nächsten keine Veränderung aufweisen. Falls beispielsweise die Temperaturwerte alle zehn Sekunden erfasst werden, führt das Festlegen einer Zeiteinheit von zehn Sekunden für die gesamte Analyse dazu, dass die Zahl der Beispielwerte stark ansteigt, ohne dass zusätzliche Informationen geliefert werden. Eine bessere Vorgehensweise besteht darin, den Mittelwert für den Zeitraum einer Stunde als Beispielwert zu verwenden.

Generische Beispieldatenschemas für die möglichen Datenquellen, die im obigen Abschnitt beschrieben werden, sind:

Wartungsdatensätze: Dies sind die Datensätze der durchgeführten Wartungsaktionen. Die Rohdaten der Wartung sind normalerweise mit einer Asset-ID und einem Zeitstempel mit Informationen darüber versehen, welche Wartungsaktivitäten zum jeweiligen Zeitpunkt durchgeführt wurden. Bei Rohdaten dieser Art müssen Wartungsaktivitäten in Kategoriespalten übersetzt werden, wobei jede Kategorie einem Wartungsaktionstyp entspricht. Ein einfaches Datenschema für Wartungsdatensätze enthält also Spalten für Asset-ID, Zeit und Wartungsaktion.

Fehlerdatensätze: Dies sind die Datensätze, die zum Vorhersageziel gehören und die wir als Fehler oder Fehlergrund bezeichnen. Hierbei kann es sich um spezielle Fehlercodes oder -ereignisse handeln, die anhand der jeweiligen geschäftlichen Bedingung festgelegt werden. In einigen Fällen enthalten die Daten mehrere Fehlercodes, von denen einige für die relevanten Fehler stehen. Nicht alle Fehler dienen als Vorhersageziel. Die restlichen Fehler werden also normalerweise verwendet, um Features zu erstellen, die mit Fehlern korrelieren können. Ein einfaches Datenschema für Fehlerdatensätze enthält also Spalten für Asset-ID, Zeit und Fehler oder Fehlerursache, falls eine Ursache verfügbar ist.

Maschinenzustände: Hierbei handelt es sich vorzugsweise um Echtzeit-Überwachungsdaten zu den Betriebsbedingungen der Maschine. Bei Türfehlern sind die Dauern der Türöffnungs- und -schließvorgänge beispielsweise gute Hinweise auf den aktuellen Zustand der Türen. Ein einfaches Datenschema für die Maschinenzustände enthält Spalten für Asset-ID, Zeit und Zustandswert.

Maschinen- und Bedienerdaten: Die Maschinen- und Bedienerdaten können zu einem Schema zusammengeführt werden, um zu identifizieren, welches Asset von welchem Bediener bedient wurde und welche Asset- und Bedienereigenschaften jeweils vorhanden sind. Ein Fahrzeug befindet sich zum Beispiel normalerweise im Besitz eines Fahrers mit Attributen wie Alter, Erfahrung usw. Wenn sich diese Daten im Laufe der Zeit ändern, sollten sie auch eine Spalte für die Zeit enthalten und für die Featuregenerierung als zeitabhängige Daten behandelt werden. Das einfache Datenschema für die Maschinenzustände enthält Spalten für Asset-ID, Asset-Features, Bediener-ID und Bedienermerkmale.

Die endgültige Tabelle vor der Bezeichnung und Featuregenerierung kann erzeugt werden, indem die Maschinenzustandstabelle per LEFT JOIN mit den Fehlerdatensätzen in den Feldern für die Asset-ID und die Zeit verknüpft wird. Diese Tabelle kann dann mit Wartungsdatensätzen der Felder für Asset-ID und Zeit und schließlich mit den Maschinen- und Bedienermerkmalen der Asset-ID verknüpft werden. Beim ersten LEFT JOIN-Vorgang sind in der Fehlerspalte NULL-Werte enthalten, wenn sich die Maschine im Normalbetrieb befindet. Diese Werte können mit einem Indikatorwert für den Normalbetrieb zugeordnet werden. Diese Fehlerspalte wird verwendet, um Bezeichnungen für das Vorhersagemodell zu erstellen.

### <a name="feature-engineering"></a>Featureentwicklung
Der erste Schritt bei der Modellierung ist die Featureentwicklung. Bei der Featureentwicklung wird der Integritätszustand einer Maschine zu einem bestimmten Zeitpunkt konzeptuell beschrieben und abstrahiert, indem Verlaufsdaten verwendet werden, die bis zu diesem Zeitpunkt erfasst wurden. Der nächste Abschnitt enthält eine Übersicht über die Art der Techniken, die für die vorbeugende Wartung verwendet werden können, und eine Beschreibung der jeweiligen Vorgehensweise. Das genaue Verfahren, das angewendet werden sollte, hängt von den Daten und vom Geschäftsproblem ab. Sie können die unten beschriebenen Methoden der Featureentwicklung aber als Anhaltspunkte für die Erstellung von Features verwenden. Unten geht es um Verzögerungsfeatures, die aus Datenquellen mit Zeitstempeln erstellt werden sollten, und um statische Features, die aus statischen Datenquellen erstellt werden. Außerdem sind Beispiele aus den Anwendungsfällen angegeben.

#### <a name="lag-features"></a>Verzögerungsfeatures
Oben wurde bereits erwähnt, dass Verlaufsdaten bei der vorbeugenden Wartung normalerweise über Zeitstempel verfügen, mit denen der Erfassungszeitpunkt für jedes Datenelement angegeben wird. Es gibt viele Methoden zum Erstellen von Features aus den Daten, die mit Zeitstempel versehen sind. In diesem Abschnitt erläutern wir einige dieser Methoden, die für die vorbeugende Wartung verwendet werden. Wir sind aber nicht allein auf diese Methoden beschränkt. Da die Featureentwicklung als einer der kreativsten Bereiche der Vorhersagemodellierung anzusehen ist, gibt es auch noch viele weitere Möglichkeiten der Featureerstellung. Hier weisen wir auf einige allgemeine Verfahren hin.

##### <a name="rolling-aggregates"></a>*Gleitaggregate (Rolling Aggregates)*
Für jeden Datensatz eines Assets wählen wir ein Gleitfenster der Größe „W“ aus. Dies ist die Anzahl der Zeiteinheiten, für die wir Verlaufsaggregate berechnen möchten. Anschließend berechnen wir Gleitaggregatfeatures, indem wir die W-Zeiträume vor dem Datum des Datensatzes verwenden. Beispiele für Gleitaggregate sind Gleitanzahl, Mittelwerte, Standardabweichungen, auf Standardabweichungen basierende Ausreißer, CUSUM-Messwerte und Minimal- und Maximalwerte für das Fenster. Ein anderes interessantes Verfahren ist das Erfassen von Trendänderungen, Spitzen und Ebenenänderungen mit Algorithmen, mit denen Unregelmäßigkeiten in Daten erkannt werden. Hierfür werden so genannte Algorithmen zur Erkennung von Anomalien verwendet.

In Abbildung 1 sind Sensorwerte dargestellt, die für ein Asset für jede Zeiteinheit aufgezeichnet werden und durch die blauen Linien gekennzeichnet sind. Achten Sie auch auf die Featureberechnung des gleitenden Durchschnitts für W=3 für die Datensätze unter t<sub>1</sub> und t<sub>2</sub> (orangefarbene bzw. grünen Gruppierungen).

![Abbildung 1. Gleitendes Aggregat – Features](./media/cortana-analytics-playbook-predictive-maintenance/rolling-aggregate-features.png)

Abbildung 1. Gleitendes Aggregat – Features

Als Beispiele (für den Ausfall von Flugzeugbauteilen) wurden Sensorwerte der letzten Woche, der letzten drei Tage und des vorangegangenen Tags verwendet, um Features vom Typ gleitender Durchschnitt, Standardabweichung und Summe zu erstellen. Ebenso wurden für Fehler von Geldautomaten sowohl Sensorrohdaten als auch gleitender Durchschnitt, Median, Bereich, Standardabweichungen, Anzahl der Ausreißer für drei Standardabweichungen und oberer und unterer CUMSUM-Wert als Features verwendet.

Für die Vorhersage von Flugverzögerungen wurde die Anzahl der Fehlercodes aus der letzten Woche verwendet, um Features zu erstellen. Für den Ausfall von Zugtüren wurde die Anzahl der Ereignisse des vorangegangenen Tags, die Anzahl der Ereignisse der letzten zwei Wochen und die Abweichung bei der Ereignisanzahl der letzten 15 Tage verwendet, um Verzögerungsfeatures zu erstellen. Der gleiche Ansatz wurde für wartungsbezogene Ereignisse genutzt.

Indem ein sehr großer Wert für „W“ gewählt wird (z.B. Jahre), kann der gesamte Verlauf eines Assets, z.B. die Zählung aller Wartungsdatensätze, Fehler usw., bis zum Zeitpunkt der Datensatzerfassung untersucht werden. Dieses Verfahren wurde zum Zählen der Schutzschalterausfälle für die letzten drei Jahre genutzt. Außerdem wurden für Zugausfälle alle Wartungsereignisse gezählt, um ein Feature zu erstellen, mit dem die langfristigen Wartungsauswirkungen erfasst werden können.

##### <a name="tumbling-aggregates"></a>*Rollierende Aggregate (Tumbling Aggregates)*
Wir wählen für jeden bezeichneten Datensatz eines Assets ein Fenster der Größe „W-<sub>k</sub>“. Hierbei steht „k“ für die Anzahl von Fenstern mit der Größe „W“, für die wir Verzögerungsfeatures erstellen möchten. Für „k“ kann eine hohe Zahl gewählt werden, um langfristige Leistungsabfallmuster zu erfassen, oder eine niedrige Zahl, um kurzfristige Auswirkungen zu erfassen. Anschließend verwenden wir dann „k“ rollierende Fenster (W-<sub>k</sub> , W-<sub>(k-1)</sub>, …, W-<sub>2</sub> , W-<sub>1</sub>), um Aggregatfeatures für die Zeiträume vor dem Aufzeichnungsdatum bzw. -zeitpunkt zu erstellen (siehe Abbildung 2). Dies sind auch gleitende Fenster auf Datensatzebene für eine Zeiteinheit, was in Abbildung 2 nicht erfasst ist. Die Idee ist aber die gleiche wie in Abbildung 1, in der auch „t<sub>2</sub>“ verwendet wird, um den Gleiteffekt zu veranschaulichen.

![Abbildung 2. Rollierendes Aggregat – Features](./media/cortana-analytics-playbook-predictive-maintenance/tumbling-aggregate-features.png)

Abbildung 2. Rollierendes Aggregat – Features

Als Beispiel (für Windturbinen) wurde W=1 und k=3 Monate verwendet, um Verzögerungsfeatures für die letzten drei Monate anhand von Ausreißern nach oben und unten zu erstellen.

#### <a name="static-features"></a>Statische Features
Dies sind die technischen Spezifikationen der Ausrüstung, z. B. Herstellungsdatum, Modellnummer, Ort usw. Verzögerungsfeatures sind meist numerischer Natur, während statische Features in den Modellen normalerweise zu Kategorievariablen werden. Als Beispiel wurden Schutzschaltereigenschaften, z. B. Spannungs-, Strom- und Leistungsangaben, sowie Transformatorentypen, Stromquellen usw. verwendet. Für den Ausfall von Bremsscheiben wurde u. a. der Radtyp, z. B. Alu oder Stahl, als Element für statische Features verwendet.

Während der Featuregenerierung sollten auch einige andere wichtige Schritte ausgeführt werden, z. B. die Behandlung fehlender Werte und die Normalisierung. Es gibt viele Methoden zum Zuordnen von fehlenden Werten und für die Normalisierung von Daten, die hier aber nicht beschrieben werden. Allerdings ist es vorteilhaft, verschiedene Methoden auszuprobieren, um zu ermitteln, ob eine Verbesserung der Vorhersageleistung möglich ist.

Die endgültige Featuretabelle nach Ausführung der Schritte zur Featureentwicklung, die im obigen Abschnitt erläutert wurden, sollte dem folgenden Beispieldatenschema ähneln, wenn die Zeiteinheit ein Tag ist:

| Asset-ID | Time | Featurespalten | Bezeichnung |
| --- | --- | --- | --- |
| 1 |Tag 1 | | |
| 1 |Tag 2 | | |
| ... |... | | |
| 2 |Tag 1 | | |
| 2 |Tag 2 | | |
| ... |... | | |

## <a name="modeling-techniques"></a>Modellierungsverfahren
Die vorbeugende Wartung ist ein sehr umfassender Bereich. Häufig werden geschäftliche Fragestellungen verwendet, bei denen viele verschiedene Perspektiven der Modellierung von Vorhersagemodellen berücksichtigt werden. In den nächsten Abschnitten werden die wichtigsten Verfahren zum Modellieren von unterschiedlichen geschäftlichen Fragestellungen beschrieben, auf die mit Lösungen für die vorbeugende Wartung Antworten gefunden werden können. Es gibt zwar Ähnlichkeiten, aber jedes Modell verfügt über eine eigene Art der Erstellung von Bezeichnungen, die jeweils ausführlich beschrieben wird. Als begleitende Ressource dient die Vorlage für die vorbeugende Wartung, die in den Beispielexperimenten von Azure Machine Learning enthalten ist. Die Links zum Onlinematerial für diese Vorlage sind im Abschnitt zu den Ressourcen angegeben. Sie sehen, wie einige der oben beschriebenen Verfahren zur Featureentwicklung und die Modellierungsverfahren, die in den nächsten Abschnitten beschrieben werden, angewendet werden, um den Ausfall von Flugzeugtriebwerken mit Azure Machine Learning vorherzusagen.

### <a name="binary-classification-for-predictive-maintenance"></a>Binäre Klassifizierung für vorbeugende Wartung
Die binäre Klassifizierung für die vorbeugende Wartung wird verwendet, um die Wahrscheinlichkeit vorherzusagen, mit der Ausrüstung innerhalb eines zukünftigen Zeitraums ausfällt. Der Zeitraum wird anhand von Geschäftsregeln und den vorliegenden Daten ermittelt. Häufig verwendete Zeiträume sind die Mindestvorlaufzeit beim Kauf von Ersatzteilen, um für Beschädigungen anfällige Bauteile auszutauschen, oder die erforderliche Zeit zum Bereitstellen von Wartungsressourcen für Wartungsroutinen zur Behebung des Problems, das innerhalb des betreffenden Zeitraums wahrscheinlich auftritt. Wir bezeichnen diesen zukünftigen Zeithorizont mit „X“.

Zum Verwenden der binären Klassifizierung müssen wir zwei Arten von Beispielen identifizieren, die wir als „positiv“ und „negativ“ bezeichnen. Jedes Beispiel ist ein Datensatz, der zu einer Zeiteinheit für ein Asset gehört und dessen Betriebszustände mithilfe der Featureentwicklung bis zu dieser Zeiteinheit konzeptuell beschreibt und abstrahiert, indem die bereits erwähnten Verlaufsdaten und andere Daten genutzt werden. Bei der binären Klassifizierung für die vorbeugende Wartung steht der positive Typ für Fehler (Bezeichnung = 1) und der negative Typ für den Normalbetrieb (Bezeichnung = 0). Bei diesen Bezeichnungen handelt es sich um Kategoriebezeichnungen. Das Ziel besteht darin, ein Modell zu finden, mit dem für jeden neuen Beispielwert ermittelt werden kann, ob in den nächsten X Zeiteinheiten voraussichtlich ein Fehler auftritt oder Normalbetrieb stattfindet.

#### <a name="label-construction"></a>Bezeichnungserstellung
Um ein Vorhersagemodell zur Beantwortung der Frage „Wie hoch ist die Wahrscheinlichkeit, dass für das Asset in den nächsten X Zeiteinheiten ein Fehler auftritt?“ zu erstellen, werden Bezeichnungen verwendet. Hierzu werden X Datensätze vor dem Ausfall eines Assets mit „Ausfall bevorstehend“ (Bezeichnung = 1) gekennzeichnet, und alle anderen Datensätze werden mit „normal“ (Bezeichnung = 0) versehen. Bei dieser Methode handelt es sich bei den Bezeichnungen um Kategorievariablen (siehe Abbildung 3).

![Abbildung 3. Bezeichnungen für binäre Klassifizierung](./media/cortana-analytics-playbook-predictive-maintenance/labelling-for-binary-classification.png)

Abbildung 3. Bezeichnungen für binäre Klassifizierung

Für Verzögerungen und Annullierungen von Flügen wird für X ein Tag gewählt, um die Verspätungen für die nächsten 24 Stunden vorherzusagen. Alle Flüge, die innerhalb von 24 Stunden vor einem Ausfall liegen, werden mit „1s“ gekennzeichnet. Für Fehler bei der Ausgabe an Geldautomaten wurden zwei Modelle mit binärer Klassifizierung erstellt: um die Ausfallwahrscheinlichkeit für eine Transaktion innerhalb der nächsten zehn Minuten vorherzusagen und zusätzlich dazu die Wahrscheinlichkeit eines Fehlers für die nächsten 100 auszugebenden Banknoten vorherzusagen. Alle Transaktionen, die innerhalb der letzten zehn Minuten des Fehlers erfolgen, werden für das erste Modell mit „1“ gekennzeichnet. Alle Banknoten, die sich innerhalb des Bereichs der letzten 100 Banknoten vor einem Fehler befinden, werden für das zweite Modell mit „1“ gekennzeichnet. Beim Ausfall von Schutzschaltern besteht die Aufgabe darin, die Wahrscheinlichkeit vorherzusagen, mit der der nächste Schutzschalterbefehl fehlschlägt. In diesem Fall wird X als ein zukünftiger Befehl gewählt. Für den Ausfall von Zugtüren wurde das Modell mit binärer Klassifizierung erstellt, um Ausfälle in den nächsten sieben Tagen vorherzusagen. Für den Ausfall von Windturbinen wurde für X ein Zeitraum von drei Monaten gewählt.

Die Fälle mit Windturbinen und Zugtüren werden auch für die Regressionsanalyse verwendet, um mit denselben Daten die Restlebensdauer vorherzusagen. Hierfür wird aber eine andere Strategie für die Bezeichnung verwendet, die im nächsten Abschnitt erklärt wird.

### <a name="regression-for-predictive-maintenance"></a>Regression für vorbeugende Wartung
Regressionsmodelle werden bei der vorbeugenden Wartung verwendet, um die Restlebensdauer eines Assets zu berechnen. Diese Dauer ist als der Zeitraum definiert, in dem das Asset betriebsbereit ist, bevor der nächste Fehler auftritt. Wie bei der binären Klassifizierung auch, ist jeder Beispielwert ein Datensatz, der zur Zeiteinheit „Y“ für ein Asset gehört. Das Ziel im Rahmen der Regression ist aber die Erstellung eines Modells, mit dem die Restlebensdauer für jeden neuen Beispielwert als fortlaufende Zahl berechnet werden kann – also die Zeit, die bis zum Ausfall verbleibt. Wir bezeichnen diesen Zeitraum als ein Vielfaches von Y. Jeder Beispielwert verfügt außerdem über eine Restlebensdauer, der berechnet werden kann, indem die Zeit gemessen wird, die für den jeweiligen Beispielwert vor dem nächsten Ausfall verbleibt.

#### <a name="label-construction"></a>Bezeichnungserstellung
Anhand der Frage „Welche Restlebensdauer hat die Ausrüstung?“ können Bezeichnungen für das Regressionsmodell erstellt werden.
Hierfür wird jeder Datensatz vor dem Ausfall bezeichnet, indem berechnet wird, wie viele Zeiteinheiten vor dem nächsten Ausfall verbleiben. Bei dieser Methode handelt es sich bei den Bezeichnungen um fortlaufende Variablen (siehe Abbildung 4).

![Abbildung 4. Bezeichnungen für die Regression](./media/cortana-analytics-playbook-predictive-maintenance/labelling-for-regression.png)

Abbildung 4. Bezeichnungen für die Regression

Anders als bei der binären Klassifizierung können Assets ohne Fehler in den Daten für die Regression nicht für die Modellierung verwendet werden. Die Bezeichnung erfolgt bezogen auf einen Fehlerpunkt, und die dazugehörige Berechnung ist nicht möglich, ohne dass bekannt ist, wie lange das Asset vor dem Ausfall richtig funktioniert hat. Dieses Problem lässt sich am besten mit einem anderen statistischen Verfahren lösen, das als „Ereigniszeitanalyse“ bezeichnet wird.
In diesem Playbook gehen wir nicht näher auf die Ereigniszeitanalyse ein. Es könnte nämlich zu Komplikationen kommen, wenn das Verfahren auf Anwendungsfälle zur vorbeugenden Wartung angewendet wird, die zeitbezogene Daten mit häufigen Intervallen umfassen.

### <a name="multi-class-classification-for-predictive-maintenance"></a>Klassifizierung mit mehreren Klassen für vorbeugende Wartung
Die Klassifizierung mit mehreren Klassen für die vorbeugende Wartung kann verwendet werden, um zwei zukünftige Ergebnisse vorherzusagen. Bei ersten Ergebnis geht es um das Zuweisen eines Assets zu einem der möglichen Zeiträume, um jedem Asset einen Zeitbereich bis zum Ausfall zuzuordnen. Beim zweiten Ergebnis geht es darum, die Wahrscheinlichkeit eines Ausfalls in einem zukünftigen Zeitraum aufgrund einer der Hauptursachen zu identifizieren. Auf diese Weise kann Wartungspersonal, das über dieses Wissen verfügt, die Probleme im Voraus lösen. Bei einem weiteren Modellierungsverfahren mit mehreren Klassen wird die wahrscheinlichste Hauptursache eines Fehlers bestimmt. So können Empfehlungen für die wichtigsten Wartungsaktionen gegeben werden, die zum Beheben eines Fehlers erforderlich sind.
Wenn Techniker über eine Prioritätenliste mit den Hauptursachen und den entsprechenden Reparaturmaßnahmen verfügen,  
können die ersten Reparaturmaßnahmen nach Ausfällen effektiver durchgeführt werden.

#### <a name="label-construction"></a>Bezeichnungserstellung
Die Bezeichnung wird für diese beiden Verfahren wie unten beschrieben durchgeführt. Die Vorgehensweise basiert auf den folgenden beiden Fragen: „Wie hoch ist die Wahrscheinlichkeit, dass ein Asset innerhalb der nächsten ‚aZ‘ Zeiteinheiten ausfällt, wobei ‚a‘ die Anzahl von Zeiträumen ist“ und „Wie hoch ist die Wahrscheinlichkeit, dass das Asset innerhalb der nächsten X Zeiteinheiten aufgrund des Problems ‚P<sub>i</sub>‘ ausfällt, wobei ‚i‘ für die Anzahl von möglichen Hauptursachen steht“.

Für die erste Frage wird die Bezeichnung erstellt, indem „aZ“ Datensätze vor dem Ausfall eines Assets unter Verwendung von Zeittöpfen (3Z, 2Z, Z) als Bezeichnung versehen werden. Alle anderen Datensätze werden mit der Bezeichnung „normal“ (Bezeichnung = 0) versehen. Bei dieser Methode ist die Bezeichnung eine Kategorievariable (siehe Abbildung 5).

![Abbildung 5. Klassifizierung mit mehreren Klassen zur Vorhersage des Fehlerzeitpunkts](./media/cortana-analytics-playbook-predictive-maintenance/labelling-for-multiclass-classification-for-failure-time-prediction.png)

Abbildung 5. Klassifizierung mit mehreren Klassen zur Vorhersage des Fehlerzeitpunkts

Für die zweite Frage wird die Bezeichnung erstellt, indem X Datensätze vor dem Ausfall eines Assets als „Ausfall bevorstehend aufgrund von Problem P<sub>i</sub>“ (Bezeichnung = P<sub>i</sub>) gekennzeichnet werden, während alle anderen Datensätze die Bezeichnung „normal“ (Bezeichnung = 0) erhalten. Bei dieser Methode handelt es sich bei den Bezeichnungen um Kategorievariablen (siehe Abbildung 6).

![Abbildung 6. Bezeichnung für die Klassifizierung mit mehreren Klassen zur Vorhersage des Fehlerzeitpunkts](./media/cortana-analytics-playbook-predictive-maintenance/labelling-for-multiclass-classification-for-root-cause-prediction.png)

Abbildung 6. Bezeichnung für die Klassifizierung mit mehreren Klassen zur Vorhersage des Fehlerzeitpunkts

Bei diesem Modell wird jedem P<sub>i</sub> eine anstehende Fehlerwahrscheinlichkeit sowie die Wahrscheinlichkeit für das Nichtauftreten eines Fehlers zugewiesen. Diese Wahrscheinlichkeiten können nach Größenordnung sortiert werden, um die Vorhersage der Probleme zu ermöglichen, die in Zukunft mit der höchsten Wahrscheinlichkeit auftreten. Der Anwendungsfall mit den Flugzeugbauteilen wurde als Problem mit einer Klassifizierung mit mehreren Klassen aufgebaut. Auf diese Weise können die Wahrscheinlichkeiten eines Ausfalls basierend auf zwei verschiedenen Druckventilbauteilen innerhalb des nächsten Monats vorhergesagt werden.

Für die Bezeichnung muss kein zukünftiger Zeithorizont gewählt werden, um Wartungsaktionen nach Fehlern empfehlen zu können. Dies liegt daran, dass bei diesem Modell keine Ausfälle in der Zukunft vorhergesagt werden, sondern es wird lediglich die wahrscheinlichste Hauptursache vorhergesagt, nachdem der Fehler bereits eingetreten ist. Ausfälle von Fahrstuhltüren stellen den dritten Fall dar, bei dem das Ziel darin besteht, die Ursache des Fehlers anhand von Verlaufsdaten zu den Betriebsbedingungen vorherzusagen. Dieses Modell wird dann verwendet, um die wahrscheinlichsten Hauptursachen vorherzusagen, nachdem ein Fehler eingetreten ist. Ein Hauptvorteil dieses Modells ist, dass auch unerfahrene Techniker Probleme leicht diagnostizieren und beheben können, für die sonst mehrere Jahre an Erfahrung erforderlich wären.

## <a name="training-validation-and-testing-methods-in-predictive-maintenance"></a>Trainings-, Validierungs- und Testmethoden bei der vorbeugenden Wartung
Bei der vorbeugenden Wartung müssen – ähnlich wie bei anderen Lösungen mit Verwendung von Zeitstempeldaten – im Rahmen der gängigen Trainings- und Testroutinen die zeitabhängigen Aspekte berücksichtigt werden, um eine bessere Generalisierung für noch nicht bekannte zukünftige Daten zu erzielen.

### <a name="cross-validation"></a>Kreuzvalidierung im Vergleich
Viele Machine Learning-Algorithmen sind von einer Reihe von Hyperparametern abhängig, mit denen die Modellleistung erheblich verändert werden kann. Die optimalen Werte dieser Hyperparameter werden beim Trainieren des Modells nicht automatisch berechnet, sondern sollten von einem Datenanalysten angegeben werden. Es gibt mehrere Möglichkeiten, gute Werte für Hyperparameter zu ermitteln. Am häufigsten wird die „k-fache Kreuzvalidierung“ verwendet, bei der die Beispiele nach dem Zufallsprinzip in „k“ Durchläufe aufgeteilt werden. Für jede Gruppe von Hyperparameterwerten wird der Lernalgorithmus mit der Häufigkeit „k“ ausgeführt. Bei jedem Durchlauf werden die Beispielwerte im aktuellen Durchlauf als Validierungssatz verwendet, und die restlichen Beispielwerte werden als Trainingssatz genutzt. Der Algorithmus wird über Trainingsbeispielwerte trainiert, und die Leistungsmetriken werden anhand von Validierungsbeispielwerten berechnet. Am Ende dieser Schleife für jede Gruppe von Hyperparameterwerten wird der Mittelwert der „k“ Leistungsmetrikwerte berechnet, und es werden die Hyperparameterwerte ausgewählt, die die beste durchschnittliche Leistung aufweisen.

Wie bereits erwähnt, werden Daten bei Problemen der vorbeugenden Wartung als Zeitreihe mit Ereignissen aufgezeichnet, die aus mehreren Datenquellen stammen. Diese Datensätze können basierend auf dem Bezeichnungszeitpunkt eines Datensatzes oder Beispielwerts sortiert werden. Wenn wir das Dataset nach dem Zufallsprinzip in einen Trainingssatz und einen Validierungssatz aufteilen, weisen einige Trainingsbeispielwerte einen späteren Zeitpunkt als die Validierungsbeispielwerte auf. Dies führt dazu, dass die zukünftige Leistung von Hyperparameterwerten anhand der Daten geschätzt wird, die vor dem Trainieren des Modells erfasst wurden. Diese Schätzungen können besonders dann zu optimistisch ausfallen, wenn Zeitreihen nicht unbeweglich sind und sich ihr Verhalten im Laufe der Zeit ändert. Dies kann dazu führen, dass die Hyperparameterwerte suboptimal sind.

Eine bessere Möglichkeit zur Ermittlung guter Werte für Hyperparameter ist die Aufteilung der Beispielwerte in einen Trainingssatz und einen Validierungssatz auf zeitabhängige Weise. Hierbei sollen alle Validierungsbeispielwerte einen späteren Zeitpunkt als alle Trainingsbeispielwerte aufweisen. Für jeden Satz mit Hyperparametern trainieren wir den Algorithmus dann über den Trainingssatz, messen die Leistung des Modells mit demselben Validierungssatz und wählen Hyperparameterwerte aus, die die beste Leistung bieten. Wenn Zeitreihendaten nicht unbeweglich sind und sich im Laufe der Zeit weiterentwickeln, führen die per Aufteilung in Training/Validierung ausgewählten Hyperparameterwerte zu einer besseren zukünftigen Leistung des Modells als die Werte, die nach dem Zufallsprinzip per Kreuzvalidierung ausgewählt wurden.

Das endgültige Modell wird generiert, indem ein Lernalgorithmus für die gesamten Daten trainiert wird. Hierfür werden die besten Hyperparameterwerte verwendet, die ermittelt werden können, indem die Aufteilung in Training/Validierung oder die Kreuzvalidierung eingesetzt wird.

### <a name="testing-for-model-performance"></a>Testen der Modellleistung
Nach dem Erstellen eines Modells müssen wir die zukünftige Leistung für neue Daten schätzen. Die einfachste Schätzung kann die Leistung des Modells anhand von Trainingsdaten sein. Diese Schätzung fällt aber zu optimistisch aus, da das Modell auf die Daten zugeschnitten ist, die zum Schätzen der Leistung verwendet werden. Eine bessere Schätzung kann eine Leistungsmetrik mit Hyperparameterwerten sein, die anhand des Validierungssatzes berechnet werden, oder eine Metrik zur durchschnittlichen Leistung, die per Kreuzvalidierung berechnet wird. Diese Schätzungen sind aus den oben genannten Gründen aber trotzdem zu optimistisch. Wir benötigen realistischere Ansätze zum Messen der Modellleistung.

Eine Möglichkeit besteht darin, die Daten nach dem Zufallsprinzip in Trainings-, Validierungs- und Testsätze zu unterteilen. Die Trainings- und Validierungssätze werden verwendet, um Werte mit Hyperparametern auszuwählen und das Modell damit zu trainieren. Die Leistung des Modells wird anhand des Testsatzes gemessen.

Eine weitere Möglichkeit, die für die vorbeugende Wartung relevant ist, ist das Aufteilen der Beispielwerte in Trainings-, Validierungs- und Testsätze auf zeitabhängige Weise. Hierbei sollen alle Testbeispielwerte einen späteren Zeitpunkt als alle Trainings- und Validierungsbeispielwerte aufweisen. Nach der Aufteilung werden die Modellgenerierung und Leistungsmessung wie oben beschrieben durchgeführt.

Wenn Zeitreihen unbeweglich und leicht vorhersagbar sind, werden mit beiden Ansätzen ähnliche Schätzungen der zukünftigen Leistung generiert. Falls die Zeitreihen aber nicht unbeweglich oder schwer vorherzusagen sind, werden mit dem zweiten Ansatz realistischere Schätzungen der zukünftigen Leistung als beim ersten Ansatz generiert.

### <a name="time-dependent-split"></a>Zeitabhängige Aufteilung
In diesem Abschnitt wenden wir eine bewährte Methode an und gehen näher darauf ein, wie Sie eine zeitabhängige Aufteilung implementieren können. Wir beschreiben eine zeitabhängige bidirektionale Aufteilung zwischen Trainings- und Testsätzen. Bei der zeitabhängigen Aufteilung für Trainings- und Validierungssätze sollte aber genau die gleiche Logik angewendet werden.

Angenommen, wir verfügen über einen Datenstrom von Ereignissen mit Zeitstempel, z. B. Messungen verschiedener Sensoren. Die Features von Trainings- und Testbeispielwerten sowie ihre Bezeichnungen werden anhand von Zeitrahmen definiert, die mehrere Ereignisse enthalten.
Für die binäre Klassifizierung, die in den Abschnitten „Featureentwicklung“ und „Modellierungsverfahren“ beschrieben wird, werden Features basierend auf den vergangenen Ereignissen erstellt. Die Bezeichnungen werden basierend auf den zukünftigen Ereignissen innerhalb von „X“ Zeiteinheiten in der Zukunft erstellt. Der Bezeichnungszeitrahmen eines Beispielwerts liegt also nach dem Zeitrahmen seiner Features. Für die zeitabhängige Aufteilung wählen wir einen Zeitpunkt aus, an dem wir ein Modell mit optimierten Hyperparametern trainieren, indem die Verlaufsdaten bis zu diesem Punkt verwendet werden. Um den Verlust zukünftiger Bezeichnungen zu vermeiden, die nach dem Trainingsdaten-Endzeitpunkt liegen, wählen wir den letztmöglichen Zeitrahmen aus, um Trainingsbeispielwerte mit X Einheiten vor dem Stichtag für die Bestimmung der Trainingsdaten zu bezeichnen. In Abbildung 7 steht jedes ausgefüllte Quadrat für eine Zeile im endgültigen Featuredataset, für das die Features und Bezeichnungen gemäß der oben beschriebenen Methode berechnet werden. In der Abbildung sind also die Datensätze dargestellt, die in Trainings- und Testdatensätze einfließen sollen, wenn die zeitabhängige Aufteilung für X=2 und W=3 implementiert wird:

![Abbildung 7. Zeitabhängige Aufteilung für binäre Klassifizierung](./media/cortana-analytics-playbook-predictive-maintenance/time-dependent-split-for-binary-classification.png)

Abbildung 7. Zeitabhängige Aufteilung für binäre Klassifizierung

Die grünen Quadrate stehen für die Datensätze zu den Zeiteinheiten, die für das Training verwendet werden können. Wie bereits erwähnt, wird jeder Trainingsbeispielwert in der endgültigen Featuretabelle generiert, indem die letzten drei Zeiträume für die Featuregenerierung und die letzten zwei zukünftigen Zeiträume für die Bezeichnung vor dem Trainingsdaten-Stichtag genutzt werden. Wir verwenden im Trainingssatz keine Beispielwerte, wenn ein Teil der zwei zukünftigen Zeiträume für einen Beispielwert nach dem Trainingsdaten-Endzeitpunkt liegt. Wir gehen davon aus, dass über den Trainingsdaten-Endzeitpunkt hinaus keine Transparenz besteht. Aufgrund dieser Einschränkung stehen schwarze Beispielwerte für die Datensätze des endgültigen Datasets mit Bezeichnungen, die nicht im Dataset für das Training verwendet werden sollten. Diese Datensätze werden auch nicht in Testdaten genutzt, weil sie vor dem Trainingsdaten-Endzeitpunkt liegen und ihre Zeitrahmen für die Bezeichnung teilweise vom Trainingszeitrahmen abhängen. Dies ist unerwünscht, da wir die Bezeichnungszeitrahmen für Training und Testing vollständig getrennt halten möchten, um den Verlust von Bezeichnungsinformationen zu verhindern.

Dieses Verfahren erlaubt eine Überlappung der Daten, die für die Featuregenerierung verwendet werden, zwischen Trainings- und Testbeispielwerten, die nahe am Trainingsdaten-Endzeitpunkt liegen. Je nach Datenverfügbarkeit kann auch eine noch deutlichere Trennung erzielt werden, indem keine Beispielwerte aus dem Testsatz genutzt werden, die innerhalb von W Zeiteinheiten des Trainingsdaten-Endzeitpunkts liegen.

Wir haben bei unserer Arbeit herausgefunden, dass Regressionsmodelle, die zum Vorhersagen der Restlebensdauer verwendet werden, stärker vom Datenverlustproblem betroffen sind. Eine Aufteilung nach dem Zufallsprinzip führt zu einer extremen Überanpassung. Bei Regressionsproblemen sollte die Aufteilung zudem wie folgt durchgeführt werden: Datensätze, die zu Assets mit Fehlern vor dem Trainingsdaten-Endzeitpunkt gehören, sollten für den Trainingssatz verwendet werden, und Assets, deren Fehler nach dem Trainingsdaten-Endzeitpunkt liegen, sollten für den Testsatz verwendet werden.

Eine weitere allgemeine bewährte Methode zum Aufteilen von Daten für Training und Testing ist die Aufteilung nach Asset-ID, damit keine Assets, die für das Training eingesetzt wurden, für das Testing verwendet werden. Mit dem Testing soll nämlich sichergestellt werden, dass das Modell realistische Ergebnisse liefert, wenn anhand eines neuen Assets Vorhersagen getroffen werden sollen.

### <a name="handling-imbalanced-data"></a>Behandeln von unausgeglichenen Daten
Wenn bei Klassifizierungsproblemen mehr Beispielwerte einer Klasse als für eine andere Klasse vorhanden sind, werden die Daten als „unausgeglichen“ bezeichnet. Der Idealfall ist, dass ausreichend Vertreter jeder Klasse in den Trainingsdaten enthalten sind, um zwischen den unterschiedlichen Klassen unterscheiden zu können. Wenn eine Klasse weniger als 10 % der Daten ausmacht, können wir die Daten als unausgeglichen bezeichnen. Das unterrepräsentierte Dataset wird als Minderheitsklasse bezeichnet. In vielen drastischen Fällen stoßen wir auf unausgeglichene Datasets, bei denen eine Klasse im Vergleich zu anderen Klassen extrem unterrepräsentiert ist, z. B. wenn sie nur 0,001 % der Datenpunkte ausmacht. Die Unausgeglichenheit von Klassen ist in vielen Bereichen ein Problem, z. B. Betrugserkennung, Netzwerkangriffe und vorbeugende Wartung. Hierbei kommt es während der Lebensdauer der Assets, bei denen es sich um Minderheitsklassen-Beispielwerte handelt, normalerweise nur selten zu Ausfällen.

Im Falle der Unausgeglichenheit von Klassen wird die Leistung der meisten Standardlernalgorithmen beeinträchtigt, da versucht wird, die Gesamtfehlerrate zu verringern. Für Daten mit 99 % negativen Klassenbeispielwerten und 1 % positiven Klassenbeispielwerten erhalten wir beispielsweise eine 99 %-ige Genauigkeit, indem wir einfach alle Instanzen als negativ bezeichnen. Dies führt aber zu einer Fehlklassifizierung aller positiven Beispielwerte, sodass der Algorithmus nicht nützlich ist, obwohl die Genauigkeitsmetrik sehr hoch ist. Daher sind herkömmliche Auswertungsmetriken, z. B. die Gesamtgenauigkeit der Fehlerrate, beim Lernen mit unausgeglichenen Daten nicht ausreichend. Andere Metriken, wie Präzision, Sensitivität, F-Maße und ROC-Kurven mit Kostenanpassung, werden für Auswertungen bei unausgeglichenen Datasets verwendet. Dies ist im Abschnitt „Auswertungsmetriken“ beschrieben.

Es gibt aber einige Methoden, die als Hilfe beim Beheben von Problemen mit der Unausgeglichenheit von Klassen dienen. Die beiden wichtigsten Methoden sind Stichprobenverfahren und kostenbewusstes Lernen.

#### <a name="sampling-methods"></a>Stichprobenmethoden
Die Verwendung von Stichprobenmethoden beim unausgeglichenen Lernen umfasst die Änderung des Datasets mit verschiedenen Mechanismen, um ein ausgeglichenes Dataset bereitzustellen. Es gibt zwar viele unterschiedliche Stichprobenverfahren, aber die einfachsten sind die Überquotierung und Unterquotierung nach dem Zufallsprinzip.

Einfach ausgedrückt: Die Überquotierung nach dem Zufallsprinzip umfasst das Auswählen einer zufälligen Stichprobe aus der Minderheitsklasse, das Replizieren dieser Beispielwerte und das Hinzufügen zum Trainingsdataset. So wird die Anzahl der gesamten Beispielwerte in der Minderheitsklasse erhöht und somit letztendlich die Anzahl der Beispielwerte für unterschiedliche Klassen ausgeglichen. Die Gefahr bei der Überquotierung besteht u. a. darin, dass mehrere Instanzen von bestimmten Beispielwerten dazu führen können, dass der Klassifizierer zu spezifisch wird und es zu einer Überanpassung kommt.
Dies ergibt eine hohe Trainingsgenauigkeit, aber die Leistung für die unbekannten Testdaten kann sehr schlecht ausfallen. Bei der Unterquotierung nach dem Zufallsprinzip geht es dagegen um das Auswählen einer zufälligen Stichprobe aus der Mehrheitsklasse und das Entfernen dieser Beispielwerte aus dem Trainingsdataset. Beim Entfernen von Beispielwerten aus der Mehrheitsklasse kann es passieren, dass dem Klassifizierer wichtige Konzepte der Mehrheitsklasse entgehen. Hybridstichproben, bei denen die Minderheitsklasse überquotiert und die Mehrheitsklasse gleichzeitig unterquotiert wird, sind ebenfalls ein guter Ansatz. Es gibt noch viele weitere anspruchsvolle Stichprobenverfahren, und effektive Stichprobenmethoden für unausgeglichene Klassen sind ein beliebter Forschungsbereich, der viel Aufmerksamkeit erfährt und über Beiträge aus vielen Kanälen verfügt. Die Verwendung von unterschiedlichen Verfahren zum Treffen der Entscheidung, welche Ansätze am effektivsten sind, bleibt normalerweise dem Datenanalysten überlassen, der entsprechend forscht und Experimente durchführt. Hierbei besteht eine hohe Abhängigkeit von den Dateneigenschaften. Außerdem muss unbedingt sichergestellt werden, dass die Stichprobenmethoden nur auf den Trainingssatz angewendet werden, nicht auf den Testsatz.

#### <a name="cost-sensitive-learning"></a>Kostenbewusstes Lernen
Bei der vorbeugenden Wartung sind Fehler, die zur Minderheitsklasse gehören, interessanter als normale Beispielwerte. Daher liegt das Hauptaugenmerk meistens auf der Leistung des Algorithmus für Fehler. Dies wird häufig als „ungleicher Verlust“ oder „asymmetrischer Kostenaufwand“ der Fehlklassifizierung von Elementen unterschiedlicher Klassen bezeichnet. Hierbei kann das falsche Vorhersagen eines positiven Werts als negativen Wert mehr als der umgekehrte Fall kosten. Der gewünschte Klassifizierer sollte eine hohe Vorhersagegenauigkeit für die Minderheitsklasse ermöglichen, ohne die Genauigkeit für die Mehrheitsklasse stark zu beeinträchtigen.

Es gibt mehrere Möglichkeiten, wie dies erreicht werden kann. Indem der Fehlklassifizierung der Minderheitsklasse hohe Kosten zugewiesen werden und versucht wird, die Gesamtkosten zu reduzieren, kann das Problem ungleicher Verluste effektiv gelöst werden. Bei einigen Machine Learning-Algorithmen wird dies standardmäßig genutzt, z. B. bei SVMs (Support Vector Machines), wobei die Kosten für positive und negative Beispielwerte während des Trainingszeitraums eingebunden werden können. Es werden auch Boosting-Methoden verwendet, die bei unausgeglichenen Daten normalerweise eine gute Leistung bieten, z. B. Boosted Decision Tree-Algorithmen.

## <a name="evaluation-metrics"></a>Auswertungsmetriken
Wie bereits erwähnt, führt die Unausgeglichenheit von Klassen zu einer schlechten Leistung, da Algorithmen Beispielwerte aus Mehrheitsklassen meistens besser klassifizieren, was auf Kosten der Minderheitsklassen geht. Dies liegt daran, dass für den Fehlklassifizierungsfehler eine starke Verbesserung erzielt wird, wenn die Mehrheitsklasse richtig bezeichnet ist. Hieraus ergeben sich niedrige Sensitivitätsraten, und das Problem vergrößert sich, wenn die Kosten von Fehlalarmen für das Unternehmen sehr hoch sind. Die Genauigkeit ist die am häufigsten verwendete Metrik, die zum Beschreiben der Leistung eines Klassifizierers verwendet wird. Wie oben beschrieben, ist die Genauigkeit ineffektiv und spiegelt nicht die tatsächliche Leistung der Funktionalität eines Klassifizierers wider, da hierfür eine sehr hohe Empfindlichkeit gegenüber Datenverteilungen besteht. Stattdessen werden andere Auswertungsmetriken verwendet, um Probleme bei Lernvorgängen mit unausgeglichenen Daten zu bewerten. In diesen Fällen sollten Sie sich zuerst die Metriken Präzision, Sensitivität und F-Maße ansehen, wenn Sie die Leistung des Modells für die vorbeugende Wartung auswerten. Bei der vorbeugenden Wartung geben die Sensitivitätsraten an, wie viele Fehler im Testsatz vom Modell richtig identifiziert wurden. Höhere Sensitivitätsraten bedeuten, dass das Modell beim Abfangen der tatsächlichen Fehler erfolgreich ist. Die Präzisionsmetrik bezieht sich auf die Rate der Fehlalarme, wobei niedrigere Präzisionsraten einer höheren Zahl von Fehlalarmen entsprechen. Beim F-Maß werden die Präzisions- und Sensitivitätsrate berücksichtigt, wobei der beste Wert 1 und der schlechteste Wert 0 ist.

Außerdem liefern Deziltabellen und Prognosegütediagramme für die binäre Klassifizierung beim Auswerten der Leistung viele Informationen. Hierbei wird nur die positive Klasse (Fehler) berücksichtigt, und es wird ein komplexeres Bild der Algorithmusleistung geliefert, als wenn nur ein fester Punkt auf der ROC-Kurve (Receiver Operating Characteristic) betrachtet wird.
Sie erhalten Deziltabellen, indem Sie die Testbeispielwerte gemäß den vorhergesagten Wahrscheinlichkeiten von Fehlern sortieren. Diese werden vom Modell berechnet, bevor der Schwellenwert festgelegt und die Entscheidung über die endgültige Bezeichnung getroffen wird. Die sortierten Beispielwerte werden dann zu Dezilen gruppiert (also die 10 % der Beispielwerte mit der höchsten Wahrscheinlichkeit und dann 20 %, 30 % usw.). Indem das Verhältnis zwischen der tatsächlichen Positivrate jedes Dezils und dessen zufälliger Baseline (also 0,1, 0,2...) berechnet wird, kann geschätzt werden, wie sich die Algorithmusleistung bei jedem Dezil ändert. Prognosegütediagramme werden verwendet, um Dezilwerte auszugeben. Hierfür werden für alle Dezile Wertpaare vom Typ „Tatsächliche Positivrate eines Dezils gegenüber der zufälligen tatsächlichen Positivrate“ ausgegeben. Normalerweise stehen bei den Ergebnissen die ersten Dezile im Vordergrund, da hiermit die größten Vorteile erzielt werden. Die ersten Dezile können auch als repräsentativ für den „risikobehafteten“ Zustand angesehen werden, wenn sie für die vorbeugende Wartung verwendet werden.

## <a name="sample-solution-architecture"></a>Beispiel für eine Lösungsarchitektur
Beim Bereitstellen einer Lösung für die vorbeugende Wartung sind wir an einer End-to-End-Lösung interessiert, die Folgendes bietet: einen fortlaufenden Zyklus der Datenerfassung, Datenspeicherung für Modelltraining, Featuregenerierung und Vorhersage und Visualisierung der Ergebnisse mit einem Mechanismus zum Generieren von Warnungen, z. B. einem Dashboard zur Überwachung von Assets. Wir wünschen uns eine Datenpipeline, die Benutzern für die Zukunft Einblicke ermöglicht – auf kontinuierliche automatisierte Weise. Eine Beispielarchitektur für die vorbeugende Wartung für solch eine IoT-Datenpipeline ist unten in Abbildung 8 dargestellt. In der Architektur werden Echtzeit-Telemetriedaten in einem Event Hub erfasst, in dem die Daten eines Datenstroms gespeichert werden. Diese Daten werden von der Stream Analytics-Einrichtung für die Echtzeitverarbeitung von Daten erfasst, z. B. die Featuregenerierung. Die Features werden dann verwendet, um den Vorhersagemodell-Webdienst aufzurufen, und die Ergebnisse werden auf dem Dashboard angezeigt. Gleichzeitig werden erfasste Daten auch in einer Verlaufsdatenbank gespeichert und mit externen Datenquellen zusammengeführt, z.B. lokale Datenbanken zum Erstellen von Trainingsbeispielwerten für die Modellierung.
Dieselben Data Warehouses können für die Batchbewertung der Beispielwerte und die Speicherung der Ergebnisse verwendet werden, die wieder genutzt werden können, um Vorhersageberichte im Dashboard bereitzustellen.

![Abbildung 8. Beispiel für eine Lösungsarchitektur für die vorbeugende Wartung](./media/cortana-analytics-playbook-predictive-maintenance/example-solution-architecture-for-predictive-maintenance.png)

Abbildung 8. Beispiel für eine Lösungsarchitektur für die vorbeugende Wartung

Weitere Informationen zu den einzelnen Komponenten der Architektur finden Sie in der [Azure](https://azure.microsoft.com/) -Dokumentation.

